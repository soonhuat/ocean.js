var e=require("bignumber.js"),t=require("crypto-js/sha256"),r=require("web3"),n=require("cross-fetch"),o=require("decimal.js"),i=require("@oceanprotocol/contracts/artifacts/contracts/pools/dispenser/Dispenser.sol/Dispenser.json"),a=require("@oceanprotocol/contracts/artifacts/contracts/pools/fixedRate/FixedRateExchange.sol/FixedRateExchange.json"),s=require("@oceanprotocol/contracts/artifacts/contracts/pools/FactoryRouter.sol/FactoryRouter.json"),c=require("@oceanprotocol/contracts/artifacts/contracts/templates/ERC20Template.sol/ERC20Template.json"),u=require("@oceanprotocol/contracts/artifacts/contracts/templates/ERC20TemplateEnterprise.sol/ERC20TemplateEnterprise.json"),l=require("@oceanprotocol/contracts/artifacts/contracts/templates/ERC721Template.sol/ERC721Template.json"),d=require("@oceanprotocol/contracts/artifacts/contracts/ERC721Factory.sol/ERC721Factory.json"),m=require("@oceanprotocol/contracts/artifacts/contracts/ve/veOCEAN.vy/veOCEAN.json"),h=require("@oceanprotocol/contracts/artifacts/contracts/ve/veFeeDistributor.vy/veFeeDistributor.json"),f=require("@oceanprotocol/contracts/artifacts/contracts/ve/veFeeEstimate.vy/veFeeEstimate.json"),v=require("@oceanprotocol/contracts/artifacts/contracts/ve/veAllocate.sol/veAllocate.json"),p=require("@oceanprotocol/contracts/artifacts/contracts/df/DFRewards.sol/DFRewards.json"),g=require("@oceanprotocol/contracts/artifacts/contracts/df/DFStrategyV1.sol/DFStrategyV1.json");function P(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var b=/*#__PURE__*/P(e),E=/*#__PURE__*/P(t),y=/*#__PURE__*/P(r),C=/*#__PURE__*/P(n),F=/*#__PURE__*/P(o),w=/*#__PURE__*/P(i),D=/*#__PURE__*/P(a),A=/*#__PURE__*/P(s),x=/*#__PURE__*/P(c),T=/*#__PURE__*/P(u),B=/*#__PURE__*/P(l),k=/*#__PURE__*/P(d),j=/*#__PURE__*/P(m),R=/*#__PURE__*/P(h),M=/*#__PURE__*/P(f),O=/*#__PURE__*/P(v),S=/*#__PURE__*/P(p),U=/*#__PURE__*/P(g);function N(){return N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N.apply(this,arguments)}function I(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,L(e,t)}function L(e,t){return L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},L(e,t)}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function q(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?W(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var _="0x0000000000000000000000000000000000000000",V="Returned error: Method eth_feeHistory not supported.";function G(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}var H=function(e,t,r,n,o){try{var i=arguments,a={from:e,gas:t+1};return Promise.resolve(r.eth.getChainId()).then(function(e){function t(){return Promise.resolve(o.apply(null,[].slice.call(i,5)).send(a))}var s=G(function(){return Promise.resolve(r.eth.getFeeHistory(1,"latest",[75])).then(function(t){var o=function(){var o,i,s;if(!(t&&null!=t&&null!=(o=t.baseFeePerGas)&&o[0]&&null!=t&&null!=(i=t.reward)&&null!=(s=i[0])&&s[0]))return Promise.resolve(X(r,n)).then(function(e){a.gasPrice=e});var c,u,l,d=new b.default(null==t||null==(c=t.reward)||null==(u=c[0])?void 0:u[0]);n>1&&(d=d.multipliedBy(n)),a.maxPriorityFeePerGas=d.integerValue(b.default.ROUND_DOWN).toString(10),a.maxFeePerGas=d.plus(new b.default(null==t||null==(l=t.baseFeePerGas)?void 0:l[0]).multipliedBy(2)).integerValue(b.default.ROUND_DOWN).toString(10),a.maxPriorityFeePerGas=e!==$&&e!==K||!new b.default(a.maxPriorityFeePerGas).lte(new b.default(Q))?a.maxPriorityFeePerGas:new b.default(Q).integerValue(b.default.ROUND_DOWN).toString(10),a.maxFeePerGas=e!==$&&e!==K||!new b.default(a.maxFeePerGas).lte(new b.default(Q))?a.maxFeePerGas:new b.default(Q).integerValue(b.default.ROUND_DOWN).toString(10)}();if(o&&o.then)return o.then(function(){})})},function(e){return(null==e?void 0:e.message)===V&&ie.log("Not able to use EIP 1559, getFeeHistory method not suported by network."),Promise.resolve(X(r,n)).then(function(e){a.gasPrice=e})});return s&&s.then?s.then(t):t()})}catch(e){return Promise.reject(e)}},Z=function(e,t){try{var r=arguments;return Promise.resolve(t.apply(null,[].slice.call(r,2)).estimateGas({from:e},function(e,t){return e?1e6:t}))}catch(e){return Promise.reject(e)}},z=function(e,t,r,n){try{var o=function(e){return"0"===e&&(e=18),b.default.config({EXPONENTIAL_AT:50}),new b.default(r).times(new b.default(10).exponentiatedBy(e)).toFixed(0)},i=new e.eth.Contract(ae,t);return Promise.resolve(n?o(n):Promise.resolve(i.methods.decimals().call()).then(o))}catch(e){return Promise.reject(e)}},J=function(e,t,r,n){try{var o=function(e){"0"===e&&(e=18);var t=new b.default(r).div(new b.default(10).exponentiatedBy(e));return b.default.config({EXPONENTIAL_AT:50}),t.toString()},i=new e.eth.Contract(ae,t);return Promise.resolve(n?o(n):Promise.resolve(i.methods.decimals().call()).then(o))}catch(e){return Promise.reject(e)}},X=function(e,t){try{return Promise.resolve(e.eth.getGasPrice()).then(function(e){var r=new b.default(e);return t?r.multipliedBy(t).integerValue(b.default.ROUND_DOWN).toString(10):r.toString(10)})}catch(e){return Promise.reject(e)}},Q=3e10,K=137,$=80001;function Y(e,t){return t&&(t.transactionBlockTimeout&&(e.transactionBlockTimeout=t.transactionBlockTimeout),t.transactionConfirmationBlocks&&(e.transactionConfirmationBlocks=t.transactionConfirmationBlocks),t.transactionPollingTimeout&&(e.transactionPollingTimeout=t.transactionPollingTimeout)),e}var ee={nouns:["Crab","Fish","Seal","Octopus","Shark","Seahorse","Walrus","Starfish","Whale","Orca","Penguin","Jellyfish","Squid","Lobster","Pelican","Shrimp","Oyster","Clam","Seagull","Dolphin","Shell","Cormorant","Otter","Anemone","Turtle","Coral","Ray","Barracuda","Krill","Anchovy","Angelfish","Barnacle","Clownfish","Cod","Cuttlefish","Eel","Fugu","Herring","Haddock","Ling","Mackerel","Manatee","Narwhal","Nautilus","Plankton","Porpoise","Prawn","Pufferfish","Swordfish","Tuna"],adjectives:["adamant","adroit","amatory","ambitious","amused","animistic","antic","arcadian","artistic","astonishing","astounding","baleful","bellicose","bilious","blissful","boorish","brave","breathtaking","brilliant","calamitous","caustic","cerulean","clever","charming","comely","competent","concomitant","confident","contumacious","corpulent","crapulous","creative","dazzling","dedicated","defamatory","delighted","delightful","determined","didactic","dilatory","dowdy","efficacious","effulgent","egregious","empowered","endemic","enthusiastic","equanimous","exceptional","execrable","fabulous","fantastic","fastidious","feckless","fecund","friable","fulsome","garrulous","generous","gentle","guileless","gustatory","heuristic","histrionic","hubristic","incendiary","incredible","insidious","insolent","inspired","intransigent","inveterate","invidious","invigorated","irksome","jejune","juicy","jocular","joyful","judicious","kind","lachrymose","limpid","loquacious","lovely","luminous","mannered","marvelous","mendacious","meretricious","minatory","mordant","motivated","munificent","nefarious","noxious","obtuse","optimistic","parsimonious","pendulous","pernicious","pervasive","petulant","passionate","phenomenal","platitudinous","pleasant","powerful","precipitate","propitious","puckish","querulous","quiescent","rebarbative","recalcitant","redolent","rhadamanthine","risible","ruminative","sagacious","salubrious","sartorial","sclerotic","serpentine","smart","spasmodic","strident","stunning","stupendous","taciturn","tactful","tasty","tenacious","tremendous","tremulous","trenchant","turbulent","turgid","ubiquitous","uxorious","verdant","vibrant","voluble","voracious","wheedling","withering","wonderful","zealous"]};function te(e){var t=e||ee,r=Math.floor(Math.random()*t.adjectives.length),n=Math.floor(Math.random()*t.nouns.length),o=Math.floor(100*Math.random()),i=t.adjectives[r].replace(/^\w/,function(e){return e.toUpperCase()}),a=t.nouns[n].replace(/^\w/,function(e){return e.toUpperCase()});return{name:i+" "+a+" Token",symbol:(i.substring(0,3)+a.substring(0,3)).toUpperCase()+"-"+o}}var re,ne=function(e){try{return Promise.resolve(new Promise(function(t){setTimeout(t,e)}))}catch(e){return Promise.reject(e)}};exports.LogLevel=void 0,(re=exports.LogLevel||(exports.LogLevel={}))[re.None=-1]="None",re[re.Error=0]="Error",re[re.Warn=1]="Warn",re[re.Log=2]="Log",re[re.Verbose=3]="Verbose";var oe=/*#__PURE__*/function(){function e(e){void 0===e&&(e=exports.LogLevel.Error),this.logLevel=void 0,this.logLevel=e}var t=e.prototype;return t.setLevel=function(e){this.logLevel=e},t.bypass=function(){this.dispatch.apply(this,["log",-Infinity].concat([].slice.call(arguments)))},t.debug=function(){this.dispatch.apply(this,["debug",exports.LogLevel.Verbose].concat([].slice.call(arguments)))},t.log=function(){this.dispatch.apply(this,["log",exports.LogLevel.Log].concat([].slice.call(arguments)))},t.warn=function(){this.dispatch.apply(this,["warn",exports.LogLevel.Warn].concat([].slice.call(arguments)))},t.error=function(){this.dispatch.apply(this,["error",exports.LogLevel.Error].concat([].slice.call(arguments)))},t.dispatch=function(e,t){var r;this.logLevel>=t&&(r=console)[e].apply(r,[].slice.call(arguments,2))},e}(),ie=new oe,ae=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}],se=function(e,t,r,n){try{var o=new e.eth.Contract(ae,t);return Promise.resolve(o.methods.allowance(r,n).call())}catch(e){return Promise.reject(e)}},ce=function(e,t,r,n,o){try{var i=new e.eth.Contract(ae,t);return Promise.resolve(i.methods.allowance(r,n).call()).then(function(r){return Promise.resolve(J(e,t,r,o))})}catch(e){return Promise.reject(e)}},ue={rinkeby:{chainId:4,Ocean:"0x8967bcf84170c91b0d24d4302c2376283b0b3a07",OPFCommunityFeeCollector:"0x39b50501c22578D084191d7E91cfDd1068A4e163",startBlock:10693767,poolTemplate:"0x41016a5a0a21B24C5c8C3ae119902a5bF5999bE2",Router:"0x4d3232171465C9F19b937b5ffBd25876345C8EfE",FixedPrice:"0x65Ee19cd86dE140fE08Bfd5d51e62Fe53e96358f",Staking:"0x651e859510A219f6CAd57E23926CdE6B9eaee822",ERC20Template:{1:"0xA0EAB6A2D6880AB37906EA5446D9085426f076E9",2:"0xF7266F51c0Cb9352aB639E9ce001a9b03316d1fE"},ERC721Template:{1:"0x2A1D7746BecA3910e2FaCfd26060B9960B4CD9ED"},Dispenser:"0xCdbdDFeac752EC993e14bF07424D324B6B6959F2",ERC721Factory:"0x465069D3d6Ec45CDB006ec3E22cC9E8d6f9793eF",veAllocate:"0xbB7E22Ed79563daDb33BeDc16080DF02B62a1CE4",veOCEAN:"0x57cD87bb197B74Df44Fd69177c0550B9a0C04619",veDelegation:"0x15A278BaabC9EE66737562E35B3a42F77a48Fa79",veFeeDistributor:"0xB99BAA8D5b131c9140Be2F13EA6D2494DF272919",veDelegationProxy:"0x7b886fa12a9b11BD0cb83e79398070CD635BcBdF",DFRewards:"0xD09BCDC099D635A0D8A7f003DC01F645382B6700",DFStrategyV1:"0x2Fe41338f11d7402E31A4b902F60077164C65a52",veFeeEstimate:"0xE98Cf50B7793C120446433Ee551C39Fcc47fDe47"},mumbai:{chainId:80001,Ocean:"0xd8992Ed72C445c35Cb4A2be468568Ed1079357c8",OPFCommunityFeeCollector:"0xd8839c98ca8CE07dDa4e460a71B634A4A82f8BD6",startBlock:26354458,poolTemplate:"0x101fd973F488c40DC57305CFED84bB2a2C8A7D6E",Router:"0x564955E9d25B49afE5Abd66966Ab4Bc9Ad55Fedb",FixedPrice:"0x25e1926E3d57eC0651e89C654AB0FA182C6D5CF7",Staking:"0xdFa50781f1E58419f56A00A8Bb5Fce1a9dE67269",ERC20Template:{1:"0xd31f74d1D5a83b896Ad746d96f78fd65B0a66EBf",2:"0x80c5DcCc76a54b3c43494Ca3c857426aA4ce0a52"},ERC721Template:{1:"0xda01B7dD00ef97Eb477B69D943779b7df5ed0Aec"},Dispenser:"0x21bc18b92F7551e715B490E2C2875E8532317F8d",ERC721Factory:"0x7d46d74023507D30ccc2d3868129fbE4e400e40B",veAllocate:"0x3fa1d5AC45ab1Ff9CFAe227c5583Ec0484b54Ef9",veOCEAN:"0x061955B6980A34fce74b235f90DBe20d76f087b1",veDelegation:"0x96E3aE4247a01C3d40a261df1F8ead70E32E7C0c",veFeeDistributor:"0x35F1e6765750E874EB9d0675393A1A394A4749b4",veDelegationProxy:"0x51B1b14b8bfb43a2fB0b49843787Ca440200F6b7",DFRewards:"0x4259c164eedA7483dda2b4b622D761A88674D31f",DFStrategyV1:"0x1be9C72500B41c286C797D4FE727747Ae9C4E195",veFeeEstimate:"0xCFeF55c6ae4d250586e293f29832967a04A9087d"},ropsten:{chainId:3,Ocean:"0x5e8DCB2AfA23844bcc311B00Ad1A0C30025aADE9",OPFCommunityFeeCollector:"0x0bA762E1b4F5772AfBb7c9A734bE0C9164ab2a30",startBlock:12274186,poolTemplate:"0x6B9FeB968947C92e35BE4c16152b7694E906FB06",Router:"0x41aC3dC16cb9603d5E9379dcDc5fAaa13c114ceE",FixedPrice:"0x1909A3cBfE0766e7bce8cC0d4927bcFDC6591cd2",Staking:"0x56b922b71D281Ef0638C6e28015f8f7A1c195B76",ERC20Template:{1:"0x4F20213DB5c9dE28E51f1f557663A38fce790b3d",2:"0xe8AC04c7c6c3bD68a06D3C58F483696fE23D9dB8"},ERC721Template:{1:"0x101fd973F488c40DC57305CFED84bB2a2C8A7D6E"},Dispenser:"0x660B3832e940E4bb4FfbDAA0aAB9E9B8D524C7Ef",ERC721Factory:"0xB0F8c68eF94ACB8E976b1dED6351Cc62e383d253"},moonbase:{chainId:1287,Ocean:"0xF6410bf5d773C7a41ebFf972f38e7463FA242477",OPFCommunityFeeCollector:"0xeD8CA02627867f459593DD35bC2B0C465B9E9518",startBlock:2169229,poolTemplate:"0x3385Ff92e9A9fbE3A36672a3857c90351d2E56a9",Router:"0x08bEEfA4AD10C5Fcf5132326bebF1AA7181aC301",FixedPrice:"0x7c7d24E786887257a7EcAdBa03063E10B4Ff3655",Staking:"0x5FFE6649C7562F3bee1ca114c7c3316BF4B45b50",ERC20Template:{1:"0xa15024b732A8f2146423D14209eFd074e61964F3",2:"0x5ee92aD0760e380501780e2c11c16451F4d3E81C"},ERC721Template:{1:"0x6468f7ffD373bE2A2371757554684766bf0F51e8"},Dispenser:"0x04706CA5d439b342449f0F483b0da0E7B70CC1ef",ERC721Factory:"0x5b1E1b333B76BC81FA60cD986EA82487e4F72B8B"},polygon:{chainId:137,Ocean:"0x282d8efCe846A88B159800bd4130ad77443Fa1A1",OPFCommunityFeeCollector:"0x042BFbd88c3998282153088604207b2AeF045b43",startBlock:28443969,poolTemplate:"0xBB3051dF2D3E408DAE6E6dAa2296BC6215F0dCFd",Router:"0x78e1317186786591912A10a7aF2490B8B4697A93",FixedPrice:"0xb28Ab1AaDe4c75F8cF013136fc0c290AeaeA9BA6",Staking:"0x3EFDD8f728c8e774aB81D14d0B2F07a8238960f4",ERC20Template:{1:"0x8B8E187CF9c551e63f54AA04E21F48CDAF2296aE",2:"0xE282492d50879b911844fA6dD87aAD6169963fC6"},ERC721Template:{1:"0xd09789Ce05aa0f6feFc18315de4964Db07Cc0618"},Dispenser:"0x257fe2e49530A4B7FC3Ed597465e2931db3f20b7",ERC721Factory:"0x6fd867E5AEE6D62a24f97939db90C4e67A73A651",DFRewards:"0x0cea7DA063EA910D6904299b5A29A8b68DBC1947",DFStrategyV1:"0x0000000000cEAe464ae8a73EDDc0B482383490e7"},bsc:{chainId:56,Ocean:"0xDCe07662CA8EbC241316a15B611c89711414Dd1a",OPFCommunityFeeCollector:"0x973e69303259B0c2543a38665122b773D28405fB",startBlock:18407552,poolTemplate:"0x3E85e7Cb15880b6d4871092E74bF65CE03E8448D",Router:"0x4344D4Bc29531DB736378e9A3dA85BF1eff0CB22",FixedPrice:"0x8bA04715B1b210f710426b21A29887EEd4EA6751",Staking:"0x1706DF1f2d93558D1d77bEd49ccdB8B88fAfC306",ERC20Template:{1:"0x45dA5988d4fEAEdc5Ee60FC83eA7Caa8Fb485883",2:"0xA8513c0457AfaD54a57664Ba5C742c24f1D624be"},ERC721Template:{1:"0xDB55DCBbAC940aCb5c28817802f17A48B15d558b"},Dispenser:"0x042BFbd88c3998282153088604207b2AeF045b43",ERC721Factory:"0xbFBc7A21133B4e0e54a182BE8d4337A5e036A615",DFRewards:"0x0cea7DA063EA910D6904299b5A29A8b68DBC1947",DFStrategyV1:"0x0000000000cEAe464ae8a73EDDc0B482383490e7"},energyweb:{chainId:246,Ocean:"0x593122AAE80A6Fc3183b2AC0c4ab3336dEbeE528",OPFCommunityFeeCollector:"0x3c21a90599b5B7f37014cA5Bf30d3f1b73d7e391",startBlock:18264850,poolTemplate:"0xCfDdA22C9837aE76E0faA845354f33C62E03653a",Router:"0x4E6058dC00e90C0DCA47A5d0D3346F409939A5ab",FixedPrice:"0xE9397625Df9B63f0C152f975234b7988b54710B8",Staking:"0x159924ca0F47D6F704B97E29099b89e518A17B5E",ERC20Template:{1:"0xc313e19146Fc9a04470689C9d41a4D3054693531",2:"0x98679D582AB3398C03D3308dEB9c7AeC50B52ded"},ERC721Template:{1:"0x1d535147a97bd87c8443125376E6671B60556E07"},Dispenser:"0x042D709b72B437d7d387F2679bD4ac060e561c9f",ERC721Factory:"0x4dD281EB67DED07E76E413Df16176D66ae69e240",DFRewards:"0x0cea7DA063EA910D6904299b5A29A8b68DBC1947",DFStrategyV1:"0x0000000000cEAe464ae8a73EDDc0B482383490e7"},moonriver:{chainId:1285,Ocean:"0x99C409E5f62E4bd2AC142f17caFb6810B8F0BAAE",OPFCommunityFeeCollector:"0x12bB8D85a091A69A07E22E52d4567dBB91568f52",startBlock:1960563,poolTemplate:"0x9497d1d64F2aFeBcd4f9916Eef3d9094E5Df962f",Router:"0x7b0576CF01E868bce46cca91b2a8E674141b0355",FixedPrice:"0x8389bC1306208488D665F939AFB4079adf6f5a06",Staking:"0xc97fa83746aDe91b0eeB16cb51326a0A980Af7c3",ERC20Template:{1:"0xE5aa2C9B551aFcA4C0A98BB3B37D7A43084d0a66",2:"0xf0c7A31D7Ee26bEBfb4BAD8e37490bEadE3F846f"},ERC721Template:{1:"0xA0329eFFa1370eAb1DC5998Db4292ae0F535a282"},Dispenser:"0x0Ee8b03Dafc868a0899ebE1c12d734D53A957250",ERC721Factory:"0x86F2BB9F8f18B5a836b342199a3eC89F282E4018",DFRewards:"0x0cea7DA063EA910D6904299b5A29A8b68DBC1947",DFStrategyV1:"0x0000000000cEAe464ae8a73EDDc0B482383490e7"},mainnet:{chainId:1,Ocean:"0x967da4048cD07aB37855c090aAF366e4ce1b9F48",OPFCommunityFeeCollector:"0x49E35cd2bAE043Abd9074B6e5a649a5AdEB05C33",startBlock:14907021,poolTemplate:"0x8daC419D5D81Af8c8E795D0D73f64d5220e28cd8",Router:"0x8149276f275EEFAc110D74AFE8AFECEaeC7d1593",FixedPrice:"0xfa48673a7C36A2A768f89AC1ee8C355D5c367B02",Staking:"0x7842Fa3B2d87Ff1cd52C4152382f7C4B3406E5A6",ERC20Template:{1:"0x973e69303259B0c2543a38665122b773D28405fB",2:"0x3E85e7Cb15880b6d4871092E74bF65CE03E8448D"},ERC721Template:{1:"0x4344D4Bc29531DB736378e9A3dA85BF1eff0CB22"},Dispenser:"0x8bA04715B1b210f710426b21A29887EEd4EA6751",ERC721Factory:"0x1706DF1f2d93558D1d77bEd49ccdB8B88fAfC306",DFRewards:"0xFe27534EA0c016634b2DaA97Ae3eF43fEe71EEB0",DFStrategyV1:"0x545138e8D76C304C916B1261B3f6c446fe4f63e3",veOCEAN:"0xE86Bf3B0D3a20444DE7c78932ACe6e5EfFE92379",veAllocate:"0x55567E038b0a50283084ae773FA433a5029822d3",veDelegation:"0xc768eDF2d21fe00ef5804A7Caa775E877e65A70E",veFeeDistributor:"0x256c54219816603BB8327F9019533B020a76e936",veDelegationProxy:"0x45E3BEc7D139Cd8Ed7FeB161F3B094688ddB0c20",veFeeEstimate:"0x4aA261bC595abC6fDEf0255C83e2a9305261753f",SmartWalletChecker:"0xd7ddf62257A41cc6cdAd7A3d36e4f1d925fD142a"},goerli:{chainId:5,Ocean:"0xCfDdA22C9837aE76E0faA845354f33C62E03653a",OPFCommunityFeeCollector:"0xE9397625Df9B63f0C152f975234b7988b54710B8",startBlock:7425573,Router:"0x159924ca0F47D6F704B97E29099b89e518A17B5E",FixedPrice:"0xc313e19146Fc9a04470689C9d41a4D3054693531",Staking:"0x98679D582AB3398C03D3308dEB9c7AeC50B52ded",ERC20Template:{1:"0x1d535147a97bd87c8443125376E6671B60556E07",2:"0x042D709b72B437d7d387F2679bD4ac060e561c9f"},ERC721Template:{1:"0x4dD281EB67DED07E76E413Df16176D66ae69e240"},Dispenser:"0xFe7967A5176fDAFa8DE109b3507016B885a82D6e",ERC721Factory:"0xe8c6Dc39602031A152440311e364818ba25C2Bc1",veAllocate:"0x3EFDD8f728c8e774aB81D14d0B2F07a8238960f4",veOCEAN:"0x8B8E187CF9c551e63f54AA04E21F48CDAF2296aE",veDelegation:"0xE282492d50879b911844fA6dD87aAD6169963fC6",veFeeDistributor:"0xd09789Ce05aa0f6feFc18315de4964Db07Cc0618",veDelegationProxy:"0x257fe2e49530A4B7FC3Ed597465e2931db3f20b7",DFRewards:"0x6fd867E5AEE6D62a24f97939db90C4e67A73A651",DFStrategyV1:"0x1Af3CC30fD18af837f7630Aff12aE2b826bD3c5D",veFeeEstimate:"0xB3AB945aa7553EbC8Ce234a53b03a1bbA23E8fAB"},polygonedge:{chainId:81001,Ocean:"0x61C9e793F3d5247cc12dB82b9DB733fC9ffBA812",OPFCommunityFeeCollector:"0x8daC419D5D81Af8c8E795D0D73f64d5220e28cd8",startBlock:5180969,Router:"0x86b77E56d54820544A64ADAC127a2F7dfBA753A2",FixedPrice:"0x6d623B190357064234859586878D67440B719783",Staking:"0x6b0B482fC953A62CCB3f1Ed655fda61042de85c4",ERC20Template:{1:"0x5802bBA5FE643f35061dfca0238Ca124D0Bb185C",2:"0xe1a6C1A49cfC60A87670AdB4Ab898402fE27C664"},ERC721Template:{1:"0xE269aD9585B9B652969508949878688c3328dc17"},Dispenser:"0x6F21fa8f723143ED9EDD102010Ed602Ac0383d83",ERC721Factory:"0x881b0E849745A65e2E082B629b5C7EDa500768fb"},gaiaxtestnet:{chainId:2021e3,Ocean:"0x80E63f73cAc60c1662f27D2DFd2EA834acddBaa8",OPFCommunityFeeCollector:"0xD3173c3E3d9ea662E914C30Bcd647eF573AcE405",startBlock:7711332,Router:"0x23A8b2D7176485a6349e4830605F323f31019333",FixedPrice:"0xb65F19225fEBb650Fcc211dC9F18FEC6f4a328D5",Staking:"0xcD8674D32E940B14ABF2Cc8C32B21952cB354101",ERC20Template:{1:"0x43eC0a34E1b70C7f8E579ab866F37642777727E7",2:"0x6976320eC365202118B4B0B0906E13DDf21633A5"},ERC721Template:{1:"0x5494711392a67DA50D3bC7b1fcC2d1877cFaA4d2"},Dispenser:"0x8c98ea273bA22327F896Aa1a1a46E1BFf56e9b1D",ERC721Factory:"0x49E35cd2bAE043Abd9074B6e5a649a5AdEB05C33"},alfajores:{chainId:44787,Ocean:"0xd8992Ed72C445c35Cb4A2be468568Ed1079357c8",OPFCommunityFeeCollector:"0xEF62FB495266C72a5212A11Dce8baa79Ec0ABeB1",startBlock:16422659,Router:"0xc37F8341Ac6e4a94538302bCd4d49Cf0852D30C0",FixedPrice:"0x3c21a90599b5B7f37014cA5Bf30d3f1b73d7e391",Staking:"0xCfDdA22C9837aE76E0faA845354f33C62E03653a",ERC20Template:{1:"0x4E6058dC00e90C0DCA47A5d0D3346F409939A5ab",2:"0xE9397625Df9B63f0C152f975234b7988b54710B8"},ERC721Template:{1:"0x159924ca0F47D6F704B97E29099b89e518A17B5E"},Dispenser:"0xc313e19146Fc9a04470689C9d41a4D3054693531",ERC721Factory:"0x98679D582AB3398C03D3308dEB9c7AeC50B52ded"},"gen-x-testnet":{chainId:100,OceanToken:"0x0995527d3473b3a98c471f1ed8787acd77fbf009",CommunityFeeCollector:"0x2e0C9e15A45c9884F7768BB852E7399B9153525d",Router:"0x7A3C9F0729AB93e4F9945221168A56eCf450187D",FixedPrice:"0xAD8E7d2aFf5F5ae7c2645a52110851914eE6664b",ERC20Templates:{1:"0xA7D7Cb8dDd46c1B13e9Ccab2fA7D4fC5926f0348",2:"0x7fEcdEDaE245d3AD5ad93c6Df9603d06887786e8"},ERC721Template:{"1:":"0x2CBCD3b10783378e34209B760e5A70531198f65E"},Dispenser:"0x94cb8FC8719Ed09bE3D9c696d2037EA95ef68d3e[5a7",ERC721Factory:"0x6cb85858183B82154921f68b434299EC4281da53"},filecointestnet:{chainId:3141,Ocean:"0xf26c6C93f9f1d725e149d95f8E7B2334a406aD10",OPFCommunityFeeCollector:"0xF6410bf5d773C7a41ebFf972f38e7463FA242477",startBlock:145290,Router:"0x1B083D8584dd3e6Ff37d04a6e7e82b5F622f3985",FixedPrice:"0x69B6E54Ad2b3c2801d11d8Ad56ea1d892555b776",Staking:"0x2112Eb973af1DBf83a4f11eda82f7a7527D7Fde5",ERC20Template:{1:"0x80E63f73cAc60c1662f27D2DFd2EA834acddBaa8",2:"0x3C5605202eD47C162450AE975415473e73F93072"},ERC721Template:{1:"0x30E4CC2C7A9c6aA2b2Ce93586E3Df24a3A00bcDD"},Dispenser:"0xDEfD0018969cd2d4E648209F876ADe184815f038",ERC721Factory:"0x9C9eE07b8Ce907D2f9244F8317C1Ed29A3193bAe"}},le={chainId:null,network:"unknown",metadataCacheUri:"https://v4.aquarius.oceanprotocol.com",nodeUri:"http://127.0.0.1:8545",providerUri:"http://127.0.0.1:8030",subgraphUri:null,explorerUri:null,oceanTokenAddress:null,oceanTokenSymbol:"OCEAN",fixedRateExchangeAddress:null,dispenserAddress:null,startBlock:0,transactionBlockTimeout:50,transactionConfirmationBlocks:1,transactionPollingTimeout:750,gasFeeMultiplier:1},de=[N({},le),N({},le,{chainId:8996,network:"development",metadataCacheUri:"http://172.15.0.5:5000",providerUri:"http://172.15.0.4:8030",subgraphUri:"https://172.15.0.15:9000"}),N({},le,{chainId:5,network:"goerli",nodeUri:"https://goerli.infura.io/v3",providerUri:"https://v4.provider.goerli.oceanprotocol.com",subgraphUri:"https://v4.subgraph.goerli.oceanprotocol.com",explorerUri:"https://goerli.etherscan.io",gasFeeMultiplier:1.1}),N({},le,{chainId:1,network:"mainnet",nodeUri:"https://mainnet.infura.io/v3",providerUri:"https://v4.provider.mainnet.oceanprotocol.com",subgraphUri:"https://v4.subgraph.mainnet.oceanprotocol.com",explorerUri:"https://etherscan.io",startBlock:11105459,transactionBlockTimeout:150,transactionConfirmationBlocks:5,transactionPollingTimeout:1750,gasFeeMultiplier:1.05}),N({},le,{chainId:137,network:"polygon",nodeUri:"https://polygon-mainnet.infura.io/v3",providerUri:"https://v4.provider.polygon.oceanprotocol.com",subgraphUri:"https://v4.subgraph.polygon.oceanprotocol.com",explorerUri:"https://polygonscan.com",oceanTokenSymbol:"mOCEAN",gasFeeMultiplier:1.6}),N({},le,{chainId:2021e3,network:"gaiaxtestnet",nodeUri:"https://rpc.gaiaxtestnet.oceanprotocol.com",providerUri:"https://v4.provider.gaiaxtestnet.oceanprotocol.com",subgraphUri:"https://v4.subgraph.gaiaxtestnet.oceanprotocol.com",explorerUri:"https://blockscout.gaiaxtestnet.oceanprotocol.com"}),N({},le,{chainId:80001,network:"mumbai",nodeUri:"https://polygon-mumbai.infura.io/v3",providerUri:"https://v4.provider.mumbai.oceanprotocol.com",subgraphUri:"https://v4.subgraph.mumbai.oceanprotocol.com",explorerUri:"https://mumbai.polygonscan.com",gasFeeMultiplier:1.1}),N({},le,{chainId:56,network:"bsc",nodeUri:"https://bsc-dataseed.binance.org",providerUri:"https://v4.provider.bsc.oceanprotocol.com",subgraphUri:"https://v4.subgraph.bsc.oceanprotocol.com",explorerUri:"https://bscscan.com/",gasFeeMultiplier:1.05}),N({},le,{chainId:246,network:"energyweb",nodeUri:"https://rpc.energyweb.org",providerUri:"https://v4.provider.energyweb.oceanprotocol.com",subgraphUri:"https://v4.subgraph.energyweb.oceanprotocol.com",explorerUri:"https://explorer.energyweb.org",gasFeeMultiplier:1.05}),N({},le,{chainId:1285,network:"moonriver",nodeUri:"https://moonriver.api.onfinality.io/public",providerUri:"https://v4.provider.moonriver.oceanprotocol.com",subgraphUri:"https://v4.subgraph.moonriver.oceanprotocol.com",explorerUri:"https://moonriver.moonscan.io/",gasFeeMultiplier:1.05}),N({},le,{chainId:81001,network:"polygonedge",nodeUri:"https://rpc-edgenet.polygon.technology",providerUri:"https://v4.provider.goerli.oceanprotocol.com",subgraphUri:"https://v4.subgraph.goerli.oceanprotocol.com",explorerUri:"https://explorer-edgenet.polygon.technology/",gasFeeMultiplier:1.05})],me=/*#__PURE__*/function(){function e(){}var t=e.prototype;return t.getAddressesFromEnv=function(e,t){var r;if(t){var n=t[e];r=N({nftFactoryAddress:n.ERC721Factory,opfCommunityFeeCollector:n.OPFCommunityFeeCollector,fixedRateExchangeAddress:n.FixedPrice,dispenserAddress:n.Dispenser,oceanTokenAddress:n.Ocean,chainId:n.chainId,startBlock:n.startBlock,veAllocate:n.veAllocate,veOCEAN:n.veOCEAN,veDelegation:n.veDelegation,veFeeDistributor:n.veFeeDistributor,veDelegationProxy:n.veDelegationProxy,DFRewards:n.DFRewards,DFStrategyV1:n.DFStrategyV1,veFeeEstimate:n.veFeeEstimate},process.env.AQUARIUS_URI&&{metadataCacheUri:process.env.AQUARIUS_URI})}else if(ue[e]){var o=ue[e];r=N({nftFactoryAddress:o.ERC721Factory,opfCommunityFeeCollector:o.OPFCommunityFeeCollector,fixedRateExchangeAddress:o.FixedPrice,dispenserAddress:o.Dispenser,oceanTokenAddress:o.Ocean,chainId:o.chainId,startBlock:o.startBlock,veAllocate:o.veAllocate,veOCEAN:o.veOCEAN,veDelegation:o.veDelegation,veFeeDistributor:o.veFeeDistributor,veDelegationProxy:o.veDelegationProxy,DFRewards:o.DFRewards,DFStrategyV1:o.DFStrategyV1,veFeeEstimate:o.veFeeEstimate},process.env.AQUARIUS_URI&&{metadataCacheUri:process.env.AQUARIUS_URI})}return r},t.getConfig=function(e,t){var r="string"==typeof e?"network":"chainId",n=de.find(function(t){return t[r]===e});return n?(n=N({},n,this.getAddressesFromEnv(n.network)),N({},n,{nodeUri:t?n.nodeUri+"/"+t:n.nodeUri})):(ie.error("No config found for given network '"+e+"' filter by '"+r+"'"),null)},e}(),he=/*#__PURE__*/function(){function e(e,t,r,n){this.web3=void 0,this.config=void 0,this.abi=void 0,this.web3=e,this.config=r||(new me).getConfig(t||"unknown"),this.abi=n||this.getDefaultAbi()}var t=e.prototype;return t.amountToUnits=function(e,t,r){try{return Promise.resolve(z(this.web3,e,t,r))}catch(e){return Promise.reject(e)}},t.unitsToAmount=function(e,t,r){try{return Promise.resolve(J(this.web3,e,t,r))}catch(e){return Promise.reject(e)}},t.getFairGasPrice=function(){try{var e;return Promise.resolve(X(this.web3,null==(e=this.config)?void 0:e.gasFeeMultiplier))}catch(e){return Promise.reject(e)}},t.getContract=function(e,t,r){return Y(new this.web3.eth.Contract(r||this.abi,e,{from:t}),this.config)},e}(),fe=/*#__PURE__*/function(e){function t(t,r,n,o,i){var a;return(a=e.call(this,r,n,o,i)||this).address=void 0,a.contract=void 0,a.address=t,a.contract=a.getContract(a.address),a}return I(t,e),t}(he),ve=/*#__PURE__*/function(e){function t(){return e.apply(this,arguments)||this}I(t,e);var r=t.prototype;return r.getDefaultAbi=function(){return w.default.abi},r.status=function(e){try{var t=this;return Promise.resolve(t.contract.methods.status(e).call()).then(function(e){if(!e)throw new Error("Np dispenser found for the given datatoken address");return e.maxTokens=t.web3.utils.fromWei(e.maxTokens),e.maxBalance=t.web3.utils.fromWei(e.maxBalance),e.balance=t.web3.utils.fromWei(e.balance),e})}catch(e){return Promise.reject(e)}},r.create=function(e,t,r,n,o,i){try{var a=this;return Promise.resolve(Z(t,a.contract.methods.create,e,a.web3.utils.toWei(r),a.web3.utils.toWei(n),t,o)).then(function(s){var c;return i?s:Promise.resolve(H(t,s+1,a.web3,null==(c=a.config)?void 0:c.gasFeeMultiplier,a.contract.methods.create,e,a.web3.utils.toWei(r),a.web3.utils.toWei(n),t,o))})}catch(e){return Promise.reject(e)}},r.activate=function(e,t,r,n,o){try{var i=this;return Promise.resolve(Z(n,i.contract.methods.activate,e,i.web3.utils.toWei(t),i.web3.utils.toWei(r))).then(function(a){var s;return o?a:Promise.resolve(H(n,a+1,i.web3,null==(s=i.config)?void 0:s.gasFeeMultiplier,i.contract.methods.activate,e,i.web3.utils.toWei(t),i.web3.utils.toWei(r)))})}catch(e){return Promise.reject(e)}},r.deactivate=function(e,t,r){try{var n=this;return Promise.resolve(Z(t,n.contract.methods.deactivate,e)).then(function(o){var i;return r?o:Promise.resolve(H(t,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.deactivate,e))})}catch(e){return Promise.reject(e)}},r.setAllowedSwapper=function(e,t,r,n){try{var o=this;return Promise.resolve(Z(t,o.contract.methods.setAllowedSwapper,e,r)).then(function(i){var a;return n?i:Promise.resolve(H(t,i+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,o.contract.methods.setAllowedSwapper,e,r))})}catch(e){return Promise.reject(e)}},r.dispense=function(e,t,r,n,o){void 0===r&&(r="1");try{var i=this;return Promise.resolve(Z(t,i.contract.methods.dispense,e,i.web3.utils.toWei(r),n)).then(function(a){var s;return o?a:Promise.resolve(H(t,a+1,i.web3,null==(s=i.config)?void 0:s.gasFeeMultiplier,i.contract.methods.dispense,e,i.web3.utils.toWei(r),n))})}catch(e){return Promise.reject(e)}},r.ownerWithdraw=function(e,t,r){try{var n=this;return Promise.resolve(Z(t,n.contract.methods.ownerWithdraw,e)).then(function(o){var i;return r?o:Promise.resolve(H(t,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.ownerWithdraw,e))})}catch(e){return Promise.reject(e)}},r.isDispensable=function(e,t,r,n){void 0===n&&(n="1");try{return Promise.resolve(this.status(e)).then(function(o){return!!o&&!1!==o.active&&Promise.resolve(t.balance(e,r)).then(function(e){return!(new F.default(e).greaterThanOrEqualTo(o.maxBalance)||new F.default(String(n)).greaterThan(o.maxTokens)||!new F.default(o.balance).greaterThanOrEqualTo(n)&&!0!==o.isMinter)})})}catch(e){return Promise.reject(e)}},t}(fe),pe=/*#__PURE__*/function(e){function t(){return e.apply(this,arguments)||this}I(t,e);var r=t.prototype;return r.getDefaultAbi=function(){return D.default.abi},r.generateExchangeId=function(e,t){try{return Promise.resolve(this.contract.methods.generateExchangeId(e,t).call())}catch(e){return Promise.reject(e)}},r.buyDatatokens=function(e,t,r,n,o,i,a){void 0===o&&(o=_),void 0===i&&(i="0");try{var s=this;return Promise.resolve(s.getExchange(t)).then(function(c){var u=s.web3.utils.toWei(i);return Promise.resolve(s.amountToUnits(c.datatoken,r,+c.dtDecimals)).then(function(r){return Promise.resolve(s.amountToUnits(c.baseToken,n,+c.btDecimals)).then(function(n){return Promise.resolve(Z(e,s.contract.methods.buyDT,t,r,n,o,u)).then(function(i){var c;return a?i:Promise.resolve(H(e,i+1,s.web3,null==(c=s.config)?void 0:c.gasFeeMultiplier,s.contract.methods.buyDT,t,r,n,o,u))})})})})}catch(e){return Promise.reject(e)}},r.sellDatatokens=function(e,t,r,n,o,i,a){void 0===o&&(o=_),void 0===i&&(i="0");try{var s=this;return Promise.resolve(s.getExchange(t)).then(function(c){var u=s.web3.utils.toWei(i);return Promise.resolve(s.amountToUnits(c.datatoken,r,+c.dtDecimals)).then(function(r){return Promise.resolve(s.amountToUnits(c.baseToken,n,+c.btDecimals)).then(function(n){return Promise.resolve(Z(e,s.contract.methods.sellDT,t,r,n,o,u)).then(function(i){var c;return a?i:Promise.resolve(H(e,i+1,s.web3,null==(c=s.config)?void 0:c.gasFeeMultiplier,s.contract.methods.sellDT,t,r,n,o,u))})})})})}catch(e){return Promise.reject(e)}},r.getNumberOfExchanges=function(){try{return Promise.resolve(this.contract.methods.getNumberOfExchanges().call())}catch(e){return Promise.reject(e)}},r.setRate=function(e,t,r,n){try{var o=this;return Promise.resolve(Z(e,o.contract.methods.setRate,t,o.web3.utils.toWei(r))).then(function(i){var a;return n?i:Promise.resolve(H(e,i+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,o.contract.methods.setRate,t,o.web3.utils.toWei(r)))})}catch(e){return Promise.reject(e)}},r.setAllowedSwapper=function(e,t,r,n){try{var o=this;return Promise.resolve(Z(e,o.contract.methods.setAllowedSwapper,t,r)).then(function(i){var a;return n?i:Promise.resolve(H(e,i+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,o.contract.methods.setAllowedSwapper,t,r))})}catch(e){return Promise.reject(e)}},r.activate=function(e,t,r){try{var n=this;return Promise.resolve(n.getExchange(t)).then(function(o){return o?!0===o.active?null:Promise.resolve(Z(e,n.contract.methods.toggleExchangeState,t)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.toggleExchangeState,t))}):null})}catch(e){return Promise.reject(e)}},r.deactivate=function(e,t,r){try{var n=this;return Promise.resolve(n.getExchange(t)).then(function(o){return o?!1===o.active?null:Promise.resolve(Z(e,n.contract.methods.toggleExchangeState,t)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.toggleExchangeState,t))}):null})}catch(e){return Promise.reject(e)}},r.getRate=function(e){try{var t=this;return Promise.resolve(t.contract.methods.getRate(e).call()).then(function(e){return Promise.resolve(t.web3.utils.fromWei(e))})}catch(e){return Promise.reject(e)}},r.getDatatokenSupply=function(e){try{var t=this;return Promise.resolve(t.contract.methods.getDTSupply(e).call()).then(function(r){return Promise.resolve(t.getExchange(e)).then(function(e){return Promise.resolve(t.unitsToAmount(e.datatoken,r,+e.dtDecimals))})})}catch(e){return Promise.reject(e)}},r.getBasetokenSupply=function(e){try{var t=this;return Promise.resolve(t.contract.methods.getBTSupply(e).call()).then(function(r){return Promise.resolve(t.getExchange(e)).then(function(e){return Promise.resolve(t.unitsToAmount(e.baseToken,r,+e.btDecimals))})})}catch(e){return Promise.reject(e)}},r.getAllowedSwapper=function(e){try{return Promise.resolve(this.contract.methods.getAllowedSwapper(e).call())}catch(e){return Promise.reject(e)}},r.calcBaseInGivenDatatokensOut=function(e,t,r){void 0===r&&(r="0");try{var n=this;return Promise.resolve(n.getExchange(e)).then(function(o){var i=n.contract.methods,a=i.calcBaseInGivenOutDT;return Promise.resolve(n.amountToUnits(o.datatoken,t,+o.dtDecimals)).then(function(t){return Promise.resolve(a.call(i,e,t,n.web3.utils.toWei(r)).call()).then(function(e){return Promise.resolve(n.unitsToAmount(o.baseToken,e.baseTokenAmount,+o.btDecimals)).then(function(t){return Promise.resolve(n.unitsToAmount(o.baseToken,e.marketFeeAmount,+o.btDecimals)).then(function(r){return Promise.resolve(n.unitsToAmount(o.baseToken,e.oceanFeeAmount,+o.btDecimals)).then(function(i){return Promise.resolve(n.unitsToAmount(o.baseToken,e.consumeMarketFeeAmount,+o.btDecimals)).then(function(e){return{baseTokenAmount:t,marketFeeAmount:r,oceanFeeAmount:i,consumeMarketFeeAmount:e}})})})})})})})}catch(e){return Promise.reject(e)}},r.getAmountBasetokensOut=function(e,t,r){void 0===r&&(r="0");try{var n=this;return Promise.resolve(n.getExchange(e)).then(function(o){var i=n.contract.methods,a=i.calcBaseOutGivenInDT;return Promise.resolve(n.amountToUnits(o.datatoken,t,+o.dtDecimals)).then(function(t){return Promise.resolve(a.call(i,e,t,n.web3.utils.toWei(r)).call()).then(function(e){return Promise.resolve(n.unitsToAmount(o.baseToken,e[0],+o.btDecimals))})})})}catch(e){return Promise.reject(e)}},r.getExchange=function(e){try{var t=this;return Promise.resolve(t.contract.methods.getExchange(e).call()).then(function(r){return r.dtDecimals=r.dtDecimals.toString(),r.btDecimals=r.btDecimals.toString(),Promise.resolve(t.unitsToAmount(r.datatoken,r.dtBalance,+r.dtDecimals)).then(function(n){return r.dtBalance=n,Promise.resolve(t.unitsToAmount(r.baseToken,r.btBalance,+r.btDecimals)).then(function(n){return r.btBalance=n,Promise.resolve(t.unitsToAmount(r.datatoken,r.dtSupply,+r.dtDecimals)).then(function(n){return r.dtSupply=n,Promise.resolve(t.unitsToAmount(r.baseToken,r.btSupply,+r.btDecimals)).then(function(n){return r.btSupply=n,r.fixedRate=t.web3.utils.fromWei(r.fixedRate),r.exchangeId=e,r})})})})})}catch(e){return Promise.reject(e)}},r.getFeesInfo=function(e){try{var t=this;return Promise.resolve(t.contract.methods.getFeesInfo(e).call()).then(function(r){return r.opcFee=t.web3.utils.fromWei(r.opcFee.toString()),r.marketFee=t.web3.utils.fromWei(r.marketFee.toString()),Promise.resolve(t.getExchange(e)).then(function(n){return Promise.resolve(t.unitsToAmount(n.baseToken,r.marketFeeAvailable,+n.btDecimals)).then(function(o){return r.marketFeeAvailable=o,Promise.resolve(t.unitsToAmount(n.baseToken,r.oceanFeeAvailable,+n.btDecimals)).then(function(t){return r.oceanFeeAvailable=t,r.exchangeId=e,r})})})})}catch(e){return Promise.reject(e)}},r.getExchanges=function(){try{return Promise.resolve(this.contract.methods.getExchanges().call())}catch(e){return Promise.reject(e)}},r.isActive=function(e){try{return Promise.resolve(this.contract.methods.isActive(e).call())}catch(e){return Promise.reject(e)}},r.activateMint=function(e,t,r){try{var n=this;return Promise.resolve(n.getExchange(t)).then(function(o){return o?!0===o.withMint?null:Promise.resolve(Z(e,n.contract.methods.toggleMintState,t,!0)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.toggleMintState,t,!0))}):null})}catch(e){return Promise.reject(e)}},r.deactivateMint=function(e,t,r){try{var n=this;return Promise.resolve(n.getExchange(t)).then(function(o){return o?!1===o.withMint?null:Promise.resolve(Z(e,n.contract.methods.toggleMintState,t,!1)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.toggleMintState,t,!1))}):null})}catch(e){return Promise.reject(e)}},r.collectBasetokens=function(e,t,r,n){try{var o=this;return Promise.resolve(o.getExchange(t)).then(function(i){return i?Promise.resolve(o.contract.methods.getExchange(t).call()).then(function(i){return Promise.resolve(o.amountToUnits(i.baseToken,r,+i.btDecimals)).then(function(r){return Promise.resolve(Z(e,o.contract.methods.collectBT,t,r)).then(function(i){var a;return n?i:Promise.resolve(H(e,i+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,o.contract.methods.collectBT,t,r))})})}):null})}catch(e){return Promise.reject(e)}},r.collectDatatokens=function(e,t,r,n){try{var o=this;return Promise.resolve(o.getExchange(t)).then(function(i){return i?Promise.resolve(o.contract.methods.getExchange(t).call()).then(function(i){return Promise.resolve(o.amountToUnits(i.datatoken,r,+i.dtDecimals)).then(function(r){return Promise.resolve(Z(e,o.contract.methods.collectDT,t,r)).then(function(i){var a;return n?i:Promise.resolve(H(e,i+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,o.contract.methods.collectDT,t,r))})})}):null})}catch(e){return Promise.reject(e)}},r.collectMarketFee=function(e,t,r){try{var n=this;return Promise.resolve(n.getExchange(t)).then(function(o){return o?Promise.resolve(Z(e,n.contract.methods.collectMarketFee,t)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.collectMarketFee,t))}):null})}catch(e){return Promise.reject(e)}},r.collectOceanFee=function(e,t,r){try{var n=this;return Promise.resolve(n.getExchange(t)).then(function(o){return o?Promise.resolve(Z(e,n.contract.methods.collectOceanFee,t)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.collectOceanFee,t))}):null})}catch(e){return Promise.reject(e)}},r.getOPCCollector=function(){try{return Promise.resolve(this.contract.methods.opcCollector().call())}catch(e){return Promise.reject(e)}},r.getRouter=function(){try{return Promise.resolve(this.contract.methods.router().call())}catch(e){return Promise.reject(e)}},r.getExchangeOwner=function(e){try{return Promise.resolve(this.getExchange(e)).then(function(e){return Promise.resolve(e.exchangeOwner)})}catch(e){return Promise.reject(e)}},r.updateMarketFee=function(e,t,r,n){try{var o=this;return Promise.resolve(Z(e,o.contract.methods.updateMarketFee,t,o.web3.utils.toWei(r))).then(function(i){var a;return n?i:Promise.resolve(H(e,i+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,o.contract.methods.updateMarketFee,t,o.web3.utils.toWei(r)))})}catch(e){return Promise.reject(e)}},r.updateMarketFeeCollector=function(e,t,r,n){try{var o=this;return Promise.resolve(Z(e,o.contract.methods.updateMarketFeeCollector,t,r)).then(function(i){var a;return n?i:Promise.resolve(H(e,i+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,o.contract.methods.updateMarketFeeCollector,t,r))})}catch(e){return Promise.reject(e)}},t}(fe),ge=/*#__PURE__*/function(e){function t(){return e.apply(this,arguments)||this}I(t,e);var r=t.prototype;return r.getDefaultAbi=function(){return A.default.abi},r.buyDatatokenBatch=function(e,t,r){try{var n=this;return Promise.resolve(Z(e,n.contract.methods.buyDTBatch,t)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.buyDTBatch,t))})}catch(e){return Promise.reject(e)}},r.isApprovedToken=function(e){try{return Promise.resolve(this.contract.methods.isApprovedToken(e).call())}catch(e){return Promise.reject(e)}},r.isFixedPrice=function(e){try{return Promise.resolve(this.contract.methods.isFixedRateContract(e).call())}catch(e){return Promise.reject(e)}},r.getOwner=function(){try{return Promise.resolve(this.contract.methods.routerOwner().call())}catch(e){return Promise.reject(e)}},r.getNFTFactory=function(){try{return Promise.resolve(this.contract.methods.factory().call())}catch(e){return Promise.reject(e)}},r.addApprovedToken=function(e,t,r){try{var n=this;return Promise.resolve(n.getOwner()).then(function(o){if(o!==e)throw new Error("Caller is not Router Owner");return Promise.resolve(Z(e,n.contract.methods.addApprovedToken,t)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.addApprovedToken,t))})})}catch(e){return Promise.reject(e)}},r.removeApprovedToken=function(e,t,r){try{var n=this;return Promise.resolve(n.getOwner()).then(function(o){if(o!==e)throw new Error("Caller is not Router Owner");return Promise.resolve(Z(e,n.contract.methods.removeApprovedToken,t)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.removeApprovedToken,t))})})}catch(e){return Promise.reject(e)}},r.addFixedRateContract=function(e,t,r){try{var n=this;return Promise.resolve(n.getOwner()).then(function(o){if(o!==e)throw new Error("Caller is not Router Owner");return Promise.resolve(Z(e,n.contract.methods.addFixedRateContract,t)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.addFixedRateContract,t))})})}catch(e){return Promise.reject(e)}},r.removeFixedRateContract=function(e,t,r){try{var n=this;return Promise.resolve(n.getOwner()).then(function(o){if(o!==e)throw new Error("Caller is not Router Owner");return Promise.resolve(Z(e,n.contract.methods.removeFixedRateContract,t)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.removeFixedRateContract,t))})})}catch(e){return Promise.reject(e)}},r.addDispenserContract=function(e,t,r){try{var n=this;return Promise.resolve(n.getOwner()).then(function(o){if(o!==e)throw new Error("Caller is not Router Owner");return Promise.resolve(Z(e,n.contract.methods.addDispenserContract,t)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.addDispenserContract,t))})})}catch(e){return Promise.reject(e)}},r.removeDispenserContract=function(e,t,r){try{var n=this;return Promise.resolve(n.getOwner()).then(function(o){if(o!==e)throw new Error("Caller is not Router Owner");return Promise.resolve(Z(e,n.contract.methods.removeDispenserContract,t)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.removeDispenserContract,t))})})}catch(e){return Promise.reject(e)}},r.getOPCFee=function(e){try{return Promise.resolve(this.contract.methods.getOPCFee(e).call())}catch(e){return Promise.reject(e)}},r.getCurrentOPCFee=function(){try{return Promise.resolve(this.contract.methods.swapOceanFee().call())}catch(e){return Promise.reject(e)}},r.updateOPCFee=function(e,t,r,n,o,i){try{var a=this;return Promise.resolve(a.getOwner()).then(function(s){if(s!==e)throw new Error("Caller is not Router Owner");return Promise.resolve(Z(e,a.contract.methods.updateOPCFee,t,r,n,o)).then(function(s){var c;return i?s:Promise.resolve(H(e,s+1,a.web3,null==(c=a.config)?void 0:c.gasFeeMultiplier,a.contract.methods.updateOPCFee,t,r,n,o))})})}catch(e){return Promise.reject(e)}},t}(fe),Pe=/*#__PURE__*/function(e){function t(){return e.apply(this,arguments)||this}I(t,e);var r=t.prototype;return r.getDefaultAbi=function(){return B.default.abi},r.createDatatoken=function(e,t,r,n,o,i,a,s,c,u,l,d){try{var m=this;return Promise.resolve(m.getNftPermissions(e,t)).then(function(h){if(!0!==h.deployERC20)throw new Error("Caller is not DatatokenDeployer");if(l||(l=1),!c||!u){var f=te();c=f.name,u=f.symbol}var v=m.getContract(e);return Promise.resolve(Z(t,v.methods.createERC20,l,[c,u],[r,n,o,i],[m.web3.utils.toWei(s),m.web3.utils.toWei(a)],[])).then(function(e){var h;return d?e:Promise.resolve(H(t,e+1,m.web3,null==(h=m.config)?void 0:h.gasFeeMultiplier,v.methods.createERC20,l,[c,u],[r,n,o,i],[m.web3.utils.toWei(s),m.web3.utils.toWei(a)],[])).then(function(e){var t,r,n;return null==e||null==(t=e.events)||null==(r=t.TokenCreated)||null==(n=r.returnValues)?void 0:n[0]})})})}catch(e){return Promise.reject(e)}},r.addManager=function(e,t,r,n){try{var o=this,i=o.getContract(e);return Promise.resolve(o.getNftOwner(e)).then(function(e){if(e!==t)throw new Error("Caller is not NFT Owner");return Promise.resolve(Z(t,i.methods.addManager,r)).then(function(e){var a;return n?e:Promise.resolve(H(t,e+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,i.methods.addManager,r))})})}catch(e){return Promise.reject(e)}},r.removeManager=function(e,t,r,n){try{var o=this,i=o.getContract(e);return Promise.resolve(o.getNftOwner(e)).then(function(e){if(e!==t)throw new Error("Caller is not NFT Owner");return Promise.resolve(Z(t,i.methods.removeManager,r)).then(function(e){var a;return n?e:Promise.resolve(H(t,e+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,i.methods.removeManager,r))})})}catch(e){return Promise.reject(e)}},r.addDatatokenDeployer=function(e,t,r,n){try{var o=this,i=o.getContract(e);return Promise.resolve(o.getNftPermissions(e,t)).then(function(e){if(!0!==e.manager)throw new Error("Caller is not Manager");return Promise.resolve(Z(t,i.methods.addToCreateERC20List,r)).then(function(e){var a;return n?e:Promise.resolve(H(t,e+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,i.methods.addToCreateERC20List,r))})})}catch(e){return Promise.reject(e)}},r.removeDatatokenDeployer=function(e,t,r,n){try{var o=this,i=o.getContract(e);return Promise.resolve(o.getNftPermissions(e,t)).then(function(a){function s(e){if(c||t===r&&!0!==e.deployERC20)throw new Error("Caller is not Manager nor DatatokenDeployer");return Promise.resolve(Z(t,i.methods.removeFromCreateERC20List,r)).then(function(e){var a;return n?e:Promise.resolve(H(t,e+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,i.methods.removeFromCreateERC20List,r))})}var c=!0!==a.manager;return c||t!==r?s(c||t===r&&o.getNftPermissions(e,t)):Promise.resolve(c||t===r&&o.getNftPermissions(e,t)).then(s)})}catch(e){return Promise.reject(e)}},r.addMetadataUpdater=function(e,t,r,n){try{var o=this,i=o.getContract(e);return Promise.resolve(o.getNftPermissions(e,t)).then(function(e){if(!0!==e.manager)throw new Error("Caller is not Manager");return Promise.resolve(Z(t,i.methods.addToMetadataList,r)).then(function(e){var a;return n?e:Promise.resolve(H(t,e+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,i.methods.addToMetadataList,r))})})}catch(e){return Promise.reject(e)}},r.removeMetadataUpdater=function(e,t,r,n){try{var o=this,i=o.getContract(e);return Promise.resolve(o.getNftPermissions(e,t)).then(function(a){function s(e){if(c||t!==r&&!0!==e.updateMetadata)throw new Error("Caller is not Manager nor Metadata Updater");return Promise.resolve(Z(t,i.methods.removeFromMetadataList,r)).then(function(e){var a;return n?e:Promise.resolve(H(t,e+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,i.methods.removeFromMetadataList,r))})}var c=!0!==a.manager;return c||t===r?s(c||t!==r&&o.getNftPermissions(e,t)):Promise.resolve(c||t!==r&&o.getNftPermissions(e,t)).then(s)})}catch(e){return Promise.reject(e)}},r.addStoreUpdater=function(e,t,r,n){try{var o=this,i=o.getContract(e);return Promise.resolve(o.getNftPermissions(e,t)).then(function(e){if(!0!==e.manager)throw new Error("Caller is not Manager");return Promise.resolve(Z(t,i.methods.addTo725StoreList,r)).then(function(e){var a;return n?e:Promise.resolve(H(t,e+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,i.methods.addTo725StoreList,r))})})}catch(e){return Promise.reject(e)}},r.removeStoreUpdater=function(e,t,r,n){try{var o=this,i=o.getContract(e);return Promise.resolve(o.getNftPermissions(e,t)).then(function(a){function s(e){if(c||t!==r&&!0!==e.store)throw new Error("Caller is not Manager nor storeUpdater");return Promise.resolve(Z(t,i.methods.removeFrom725StoreList,r)).then(function(e){var a;return n?e:Promise.resolve(H(t,e+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,i.methods.removeFrom725StoreList,r))})}var c=!0!==a.manager;return c||t===r?s(c||t!==r&&o.getNftPermissions(e,t)):Promise.resolve(c||t!==r&&o.getNftPermissions(e,t)).then(s)})}catch(e){return Promise.reject(e)}},r.cleanPermissions=function(e,t,r){try{var n=this,o=n.getContract(e);return Promise.resolve(n.getNftOwner(e)).then(function(e){if(e!==t)throw new Error("Caller is not NFT Owner");return Promise.resolve(Z(t,o.methods.cleanPermissions)).then(function(e){var i;return r?e:Promise.resolve(H(t,e+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,o.methods.cleanPermissions))})})}catch(e){return Promise.reject(e)}},r.transferNft=function(e,t,r,n,o){try{var i=this,a=i.getContract(e);return Promise.resolve(i.getNftOwner(e)).then(function(e){if(e!==t)throw new Error("Caller is not NFT Owner");var s=n||1;return Promise.resolve(Z(t,a.methods.transferFrom,t,r,s)).then(function(e){var n;return o?e:Promise.resolve(H(t,e+1,i.web3,null==(n=i.config)?void 0:n.gasFeeMultiplier,a.methods.transferFrom,t,r,s))})})}catch(e){return Promise.reject(e)}},r.safeTransferNft=function(e,t,r,n,o){try{var i=this,a=i.getContract(e);return Promise.resolve(i.getNftOwner(e)).then(function(e){if(e!==t)throw new Error("Caller is not NFT Owner");var s=n||1;return Promise.resolve(Z(t,a.methods.safeTransferFrom,t,r,s)).then(function(e){var n;return o?e:Promise.resolve(H(t,e+1,i.web3,null==(n=i.config)?void 0:n.gasFeeMultiplier,a.methods.safeTransferFrom,t,r,s))})})}catch(e){return Promise.reject(e)}},r.setMetadata=function(e,t,r,n,o,i,a,s,c,u){try{var l=this,d=l.getContract(e);return c||(c=[]),Promise.resolve(l.getNftPermissions(e,t)).then(function(e){if(!e.updateMetadata)throw new Error("Caller is not Metadata updater");return Promise.resolve(Z(t,d.methods.setMetaData,r,n,o,i,a,s,c)).then(function(e){var m;return u?e:Promise.resolve(H(t,e+1,l.web3,null==(m=l.config)?void 0:m.gasFeeMultiplier,d.methods.setMetaData,r,n,o,i,a,s,c))})})}catch(e){return Promise.reject(e)}},r.setMetadataAndTokenURI=function(e,t,r,n){try{var o=this,i=o.getContract(e);return Promise.resolve(o.getNftPermissions(e,t)).then(function(e){if(!e.updateMetadata)throw new Error("Caller is not Metadata updater");var a=N({},r,{metadataProofs:r.metadataProofs||[]});return Promise.resolve(Z(t,i.methods.setMetaDataAndTokenURI,a)).then(function(e){var r;return n?e:Promise.resolve(H(t,e+1,o.web3,null==(r=o.config)?void 0:r.gasFeeMultiplier,i.methods.setMetaDataAndTokenURI,a))})})}catch(e){return Promise.reject(e)}},r.setMetadataState=function(e,t,r,n){try{var o=this,i=o.getContract(e);return Promise.resolve(o.getNftPermissions(e,t)).then(function(e){if(!e.updateMetadata)throw new Error("Caller is not Metadata updater");return Promise.resolve(Z(t,i.methods.setMetaDataState,r)).then(function(e){var a;return n?e:Promise.resolve(H(t,e+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,i.methods.setMetaDataState,r))})})}catch(e){return Promise.reject(e)}},r.setTokenURI=function(e,t,r,n){try{var o=this,i=o.getContract(e);return Promise.resolve(Z(t,i.methods.setTokenURI,"1",r)).then(function(e){var a;return n?e:Promise.resolve(H(t,e+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,i.methods.setTokenURI,"1",r))})}catch(e){return Promise.reject(e)}},r.getNftOwner=function(e){try{var t=this.getContract(e);return Promise.resolve(t.methods.ownerOf(1).call())}catch(e){return Promise.reject(e)}},r.getNftPermissions=function(e,t){try{var r=this.getContract(e);return Promise.resolve(r.methods.getPermissions(t).call())}catch(e){return Promise.reject(e)}},r.getMetadata=function(e){try{var t=this.getContract(e);return Promise.resolve(t.methods.getMetaData().call())}catch(e){return Promise.reject(e)}},r.isDatatokenDeployer=function(e,t){try{var r=this.getContract(e);return Promise.resolve(r.methods.isERC20Deployer(t).call())}catch(e){return Promise.reject(e)}},r.setData=function(e,t,r,n){try{var o=this;return Promise.resolve(o.getNftPermissions(e,t)).then(function(i){if(!0!==i.store)throw new Error("User is not ERC20 store updater");var a=o.getContract(e),s=o.web3.utils.keccak256(r),c=o.web3.utils.asciiToHex(n);return Promise.resolve(Z(t,a.methods.setNewData,s,c)).then(function(e){var r;return Promise.resolve(H(t,e+1,o.web3,null==(r=o.config)?void 0:r.gasFeeMultiplier,a.methods.setNewData,s,c))})})}catch(e){return Promise.reject(e)}},r.getData=function(e,t){try{var r=this,n=r.getContract(e),o=r.web3.utils.keccak256(t);return Promise.resolve(n.methods.getData(o).call()).then(function(e){return e?r.web3.utils.hexToAscii(e):null})}catch(e){return Promise.reject(e)}},r.getTokenURI=function(e,t){try{var r=this.getContract(e);return Promise.resolve(r.methods.tokenURI(t).call())}catch(e){return Promise.reject(e)}},t}(he),be=/*#__PURE__*/function(e){I(r,e);var t=r.prototype;function r(t,r,n,o,i){var a;return(a=e.call(this,t,r,n,o)||this).abiEnterprise=void 0,a.nft=void 0,a.abiEnterprise=i||T.default.abi,a.nft=new Pe(a.web3),a}return t.getDefaultAbi=function(){return x.default.abi},t.approve=function(e,t,r,n,o){try{var i=this,a=i.getContract(e);return Promise.resolve(Z(n,a.methods.approve,t,i.web3.utils.toWei(r))).then(function(e){var s;return o?e:Promise.resolve(H(n,e+1,i.web3,null==(s=i.config)?void 0:s.gasFeeMultiplier,a.methods.approve,t,i.web3.utils.toWei(r)))})}catch(e){return Promise.reject(e)}},t.createFixedRate=function(e,t,r,n){try{var o=this,i=o.getContract(e);return Promise.resolve(o.isDatatokenDeployer(e,t)).then(function(e){if(!e)throw new Error("User is not Datatoken Deployer");r.allowedConsumer||(r.allowedConsumer=_);var a=r.withMint?1:0;return Promise.resolve(Z(t,i.methods.createFixedRate,r.fixedRateAddress,[r.baseTokenAddress,r.owner,r.marketFeeCollector,r.allowedConsumer],[r.baseTokenDecimals,r.datatokenDecimals,r.fixedRate,r.marketFee,a])).then(function(e){var s;return n?e:Promise.resolve(H(t,e+1,o.web3,null==(s=o.config)?void 0:s.gasFeeMultiplier,i.methods.createFixedRate,r.fixedRateAddress,[r.baseTokenAddress,r.owner,r.marketFeeCollector,r.allowedConsumer],[r.baseTokenDecimals,r.datatokenDecimals,r.fixedRate,r.marketFee,a]))})})}catch(e){return Promise.reject(e)}},t.createDispenser=function(e,t,r,n,o){try{var i=this;return Promise.resolve(i.isDatatokenDeployer(e,t)).then(function(a){if(!a)throw new Error("User is not Datatoken Deployer");var s=i.getContract(e);return n.allowedSwapper||(n.allowedSwapper=_),n.withMint||(n.withMint=!1),Promise.resolve(Z(t,s.methods.createDispenser,r,n.maxTokens,n.maxBalance,n.withMint,n.allowedSwapper)).then(function(e){var a;return o?e:Promise.resolve(H(t,e+1,i.web3,null==(a=i.config)?void 0:a.gasFeeMultiplier,s.methods.createDispenser,r,n.maxTokens,n.maxBalance,n.withMint,n.allowedSwapper))})})}catch(e){return Promise.reject(e)}},t.mint=function(e,t,r,n,o){try{var i=this,a=i.getContract(e);return Promise.resolve(i.getPermissions(e,t)).then(function(s){if(!0!==s.minter)throw new Error("Caller is not Minter");return Promise.resolve(i.getCap(e)).then(function(e){if(new F.default(e).gte(r))return Promise.resolve(Z(t,a.methods.mint,n||t,i.web3.utils.toWei(r))).then(function(e){var s;return o?e:Promise.resolve(H(t,e+1,i.web3,null==(s=i.config)?void 0:s.gasFeeMultiplier,a.methods.mint,n||t,i.web3.utils.toWei(r)))});throw new Error("Mint amount exceeds cap available")})})}catch(e){return Promise.reject(e)}},t.addMinter=function(e,t,r,n){try{var o=this,i=o.getContract(e);return Promise.resolve(o.isDatatokenDeployer(e,t)).then(function(e){if(!0!==e)throw new Error("Caller is not DatatokenDeployer");return Promise.resolve(Z(t,i.methods.addMinter,r)).then(function(e){var a;return n?e:Promise.resolve(H(t,e+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,i.methods.addMinter,r))})})}catch(e){return Promise.reject(e)}},t.removeMinter=function(e,t,r,n){try{var o=this,i=o.getContract(e);return Promise.resolve(o.isDatatokenDeployer(e,t)).then(function(e){if(!0!==e)throw new Error("Caller is not DatatokenDeployer");return Promise.resolve(Z(t,i.methods.removeMinter,r)).then(function(e){var a;return n?e:Promise.resolve(H(t,e+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,i.methods.removeMinter,r))})})}catch(e){return Promise.reject(e)}},t.addPaymentManager=function(e,t,r,n){try{var o=this,i=o.getContract(e);return Promise.resolve(o.isDatatokenDeployer(e,t)).then(function(e){if(!0!==e)throw new Error("Caller is not DatatokenDeployer");return Promise.resolve(Z(t,i.methods.addPaymentManager,r)).then(function(e){var a;return n?e:Promise.resolve(H(t,e+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,i.methods.addPaymentManager,r))})})}catch(e){return Promise.reject(e)}},t.removePaymentManager=function(e,t,r,n){try{var o=this,i=o.getContract(e);return Promise.resolve(o.isDatatokenDeployer(e,t)).then(function(e){if(!0!==e)throw new Error("Caller is not DatatokenDeployer");return Promise.resolve(Z(t,i.methods.removePaymentManager,r)).then(function(e){var a;return n?e:Promise.resolve(H(t,e+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,i.methods.removePaymentManager,r))})})}catch(e){return Promise.reject(e)}},t.setPaymentCollector=function(e,t,r,n){try{var o=this,i=o.getContract(e);return Promise.resolve(o.getPermissions(e,t)).then(function(a){function s(e){function a(a){function s(e){if(!c&&!u&&!(null==e?void 0:e.deployERC20))throw new Error("Caller is not Fee Manager, owner or Datatoken Deployer");return Promise.resolve(Z(t,i.methods.setPaymentCollector,r)).then(function(e){var a;return n?e:Promise.resolve(H(t,e+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,i.methods.setPaymentCollector,r))})}var u=e&&a===t;return e&&!u?Promise.resolve(e&&!u&&o.nft.getNftPermissions(e,t)).then(s):s(e&&!u&&o.nft.getNftPermissions(e,t))}return e?Promise.resolve(o.nft.getNftOwner(e)).then(a):a(e)}var c=a.paymentManager;return c?s(!c&&o.getNFTAddress(e)):Promise.resolve(!c&&o.getNFTAddress(e)).then(s)})}catch(e){return Promise.reject(e)}},t.getPaymentCollector=function(e){try{var t=this.getContract(e);return Promise.resolve(t.methods.getPaymentCollector().call())}catch(e){return Promise.reject(e)}},t.transfer=function(e,t,r,n){try{var o=this.web3.utils.toWei(r);return Promise.resolve(this.transferWei(e,t,o,n))}catch(e){return Promise.reject(e)}},t.transferWei=function(e,t,r,n,o){try{var i=this,a=i.getContract(e);return Promise.resolve(Z(n,a.methods.transfer,t,r)).then(function(e){var s;return o?e:Promise.resolve(H(n,e+1,i.web3,null==(s=i.config)?void 0:s.gasFeeMultiplier,a.methods.transfer,t,r))})}catch(e){return Promise.reject(e)}},t.startOrder=function(e,t,r,n,o,i,a){try{var s=this,c=s.getContract(e);return i||(i={consumeMarketFeeAddress:_,consumeMarketFeeToken:_,consumeMarketFeeAmount:"0"}),Promise.resolve(Z(t,c.methods.startOrder,r,n,o,i)).then(function(e){var u;return a?e:Promise.resolve(H(t,e+1,s.web3,null==(u=s.config)?void 0:u.gasFeeMultiplier,c.methods.startOrder,r,n,o,i))})}catch(e){return Promise.reject(e)}},t.reuseOrder=function(e,t,r,n,o){try{var i=this,a=i.getContract(e);return Promise.resolve(Z(t,a.methods.reuseOrder,r,n)).then(function(e){var s;return o?e:Promise.resolve(H(t,e+1,i.web3,null==(s=i.config)?void 0:s.gasFeeMultiplier,a.methods.reuseOrder,r,n))})}catch(e){return Promise.reject(e)}},t.buyFromFreAndOrder=function(e,t,r,n,o){try{var i=this,a=i.getContract(e,null,i.abiEnterprise);return Promise.resolve(i.getFreOrderParams(n)).then(function(e){return Promise.resolve(Z(t,a.methods.buyFromFreAndOrder,r,e)).then(function(n){var s;return o?n:Promise.resolve(H(t,n+1,i.web3,null==(s=i.config)?void 0:s.gasFeeMultiplier,a.methods.buyFromFreAndOrder,r,e))})})}catch(e){return Promise.reject(e)}},t.buyFromDispenserAndOrder=function(e,t,r,n,o){try{var i=this,a=i.getContract(e,null,i.abiEnterprise);return Promise.resolve(Z(t,a.methods.buyFromDispenserAndOrder,r,n)).then(function(e){var s;return o?e:Promise.resolve(H(t,e+1,i.web3,null==(s=i.config)?void 0:s.gasFeeMultiplier,a.methods.buyFromDispenserAndOrder,r,n))})}catch(e){return Promise.reject(e)}},t.setData=function(e,t,r,n){try{var o=this;return Promise.resolve(o.isDatatokenDeployer(e,t)).then(function(i){if(!i)throw new Error("User is not Datatoken Deployer");var a=o.getContract(e),s=o.web3.utils.asciiToHex(r);return Promise.resolve(Z(t,a.methods.setData,s)).then(function(e){var r;return n?e:Promise.resolve(H(t,e+1,o.web3,null==(r=o.config)?void 0:r.gasFeeMultiplier,a.methods.setData,s))})})}catch(e){return Promise.reject(e)}},t.cleanPermissions=function(e,t,r){try{var n=this,o=n.nft,i=o.getNftOwner;return Promise.resolve(n.getNFTAddress(e)).then(function(a){return Promise.resolve(i.call(o,a)).then(function(o){if(o!==t)throw new Error("Caller is NOT Nft Owner");var i=n.getContract(e);return Promise.resolve(Z(t,i.methods.cleanPermissions)).then(function(e){var o;return r?e:Promise.resolve(H(t,e+1,n.web3,null==(o=n.config)?void 0:o.gasFeeMultiplier,i.methods.cleanPermissions))})})})}catch(e){return Promise.reject(e)}},t.getPermissions=function(e,t){try{var r=this.getContract(e);return Promise.resolve(r.methods.permissions(t).call())}catch(e){return Promise.reject(e)}},t.getCap=function(e){try{var t=this,r=t.getContract(e);return Promise.resolve(r.methods.cap().call()).then(function(e){return t.web3.utils.fromWei(e)})}catch(e){return Promise.reject(e)}},t.getDecimals=function(e){try{var t=this.getContract(e);return Promise.resolve(t.methods.decimals().call())}catch(e){return Promise.reject(e)}},t.getSymbol=function(e){try{var t=this.getContract(e);return Promise.resolve(t.methods.symbol().call())}catch(e){return Promise.reject(e)}},t.getName=function(e){try{var t=this.getContract(e);return Promise.resolve(t.methods.name().call())}catch(e){return Promise.reject(e)}},t.getNFTAddress=function(e){try{var t=this.getContract(e);return Promise.resolve(t.methods.getERC721Address().call())}catch(e){return Promise.reject(e)}},t.isDatatokenDeployer=function(e,t){try{var r=this.getContract(e);return Promise.resolve(r.methods.isERC20Deployer(t).call())}catch(e){return Promise.reject(e)}},t.balance=function(e,t){try{var r=this,n=r.getContract(e,t);return Promise.resolve(n.methods.balanceOf(t).call()).then(function(e){return r.web3.utils.fromWei(e)})}catch(e){return Promise.reject(e)}},t.setPublishingMarketFee=function(e,t,r,n,o,i){try{var a=this,s=a.getContract(e,o);return Promise.resolve(s.methods.getPublishingMarketFee().call()).then(function(e){if(e[0]!==o)throw new Error("Caller is not the Publishing Market Fee Address");return Promise.resolve(Z(o,s.methods.setPublishingMarketFee,t,r,n)).then(function(e){var c;return i?e:Promise.resolve(H(o,e+1,a.web3,null==(c=a.config)?void 0:c.gasFeeMultiplier,s.methods.setPublishingMarketFee,t,r,n))})})}catch(e){return Promise.reject(e)}},t.getPublishingMarketFee=function(e,t){try{var r=this.getContract(e,t);return Promise.resolve(r.methods.getPublishingMarketFee().call()).then(function(e){return{publishMarketFeeAddress:e[0],publishMarketFeeToken:e[1],publishMarketFeeAmount:e[2]}})}catch(e){return Promise.reject(e)}},t.getFreOrderParams=function(e){try{var t=this,r=e.exchangeId,n=e.exchangeContract;return Promise.resolve(z(t.web3,e.baseTokenAddress,e.maxBaseTokenAmount,e.baseTokenDecimals)).then(function(o){return Promise.resolve(z(t.web3,e.baseTokenAddress,e.swapMarketFee,e.baseTokenDecimals)).then(function(t){return{exchangeContract:n,exchangeId:r,maxBaseTokenAmount:o,swapMarketFee:t,marketFeeAddress:e.marketFeeAddress}})})}catch(e){return Promise.reject(e)}},r}(he),Ee=/*#__PURE__*/function(e){function t(){return e.apply(this,arguments)||this}I(t,e);var r=t.prototype;return r.getDefaultAbi=function(){return k.default.abi},r.createNFT=function(e,t,r){try{var n=this;if(t.templateIndex||(t.templateIndex=1),!t.name||!t.symbol){var o=te(),i=o.symbol;t.name=o.name,t.symbol=i}var a=t.templateIndex;return Promise.resolve(n.getCurrentNFTTemplateCount()).then(function(o){if(a>o)throw new Error("Template index doesnt exist");if(0===t.templateIndex)throw new Error("Template index cannot be ZERO");return Promise.resolve(n.getNFTTemplate(t.templateIndex)).then(function(o){if(!1===o.isActive)throw new Error("Template is not active");return Promise.resolve(Z(e,n.contract.methods.deployERC721Contract,t.name,t.symbol,t.templateIndex,_,_,t.tokenURI,t.transferable,t.owner)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.deployERC721Contract,t.name,t.symbol,t.templateIndex,_,_,t.tokenURI,t.transferable,t.owner)).then(function(e){var t,r,n;return null==e||null==(t=e.events)||null==(r=t.NFTCreated)||null==(n=r.returnValues)?void 0:n[0]})})})})}catch(e){return Promise.reject(e)}},r.getCurrentNFTCount=function(){try{return Promise.resolve(this.contract.methods.getCurrentNFTCount().call())}catch(e){return Promise.reject(e)}},r.getCurrentTokenCount=function(){try{return Promise.resolve(this.contract.methods.getCurrentTokenCount().call())}catch(e){return Promise.reject(e)}},r.getOwner=function(){try{return Promise.resolve(this.contract.methods.owner().call())}catch(e){return Promise.reject(e)}},r.getCurrentNFTTemplateCount=function(){try{return Promise.resolve(this.contract.methods.getCurrentNFTTemplateCount().call())}catch(e){return Promise.reject(e)}},r.getCurrentTokenTemplateCount=function(){try{return Promise.resolve(this.contract.methods.getCurrentTemplateCount().call())}catch(e){return Promise.reject(e)}},r.getNFTTemplate=function(e){try{var t=this;return Promise.resolve(t.getCurrentNFTTemplateCount()).then(function(r){if(e>r)throw new Error("Template index doesnt exist");if(0===e)throw new Error("Template index cannot be ZERO");return Promise.resolve(t.contract.methods.getNFTTemplate(e).call())})}catch(e){return Promise.reject(e)}},r.getTokenTemplate=function(e){try{return Promise.resolve(this.contract.methods.getTokenTemplate(e).call())}catch(e){return Promise.reject(e)}},r.checkDatatoken=function(e){try{return Promise.resolve(this.contract.methods.erc20List(e).call())}catch(e){return Promise.reject(e)}},r.checkNFT=function(e){try{return Promise.resolve(this.contract.methods.erc721List(e).call())}catch(e){return Promise.reject(e)}},r.addNFTTemplate=function(e,t,r){try{var n=this;return Promise.resolve(n.getOwner()).then(function(o){if(o!==e)throw new Error("Caller is not Factory Owner");if(t===_)throw new Error("Template cannot be ZERO address");return Promise.resolve(Z(e,n.contract.methods.add721TokenTemplate,t)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.add721TokenTemplate,t))})})}catch(e){return Promise.reject(e)}},r.disableNFTTemplate=function(e,t,r){try{var n=this;return Promise.resolve(n.getOwner()).then(function(o){if(o!==e)throw new Error("Caller is not Factory Owner");return Promise.resolve(n.getCurrentNFTTemplateCount()).then(function(o){if(t>o)throw new Error("Template index doesnt exist");if(0===t)throw new Error("Template index cannot be ZERO");return Promise.resolve(Z(e,n.contract.methods.disable721TokenTemplate,t)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.disable721TokenTemplate,t))})})})}catch(e){return Promise.reject(e)}},r.reactivateNFTTemplate=function(e,t,r){try{var n=this;return Promise.resolve(n.getOwner()).then(function(o){if(o!==e)throw new Error("Caller is not Factory Owner");return Promise.resolve(n.getCurrentNFTTemplateCount()).then(function(o){if(t>o)throw new Error("Template index doesnt exist");if(0===t)throw new Error("Template index cannot be ZERO");return Promise.resolve(Z(e,n.contract.methods.reactivate721TokenTemplate,t)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.reactivate721TokenTemplate,t))})})})}catch(e){return Promise.reject(e)}},r.addTokenTemplate=function(e,t,r){try{var n=this;return Promise.resolve(n.getOwner()).then(function(o){if(o!==e)throw new Error("Caller is not Factory Owner");if(t===_)throw new Error("Template cannot be address ZERO");return Promise.resolve(Z(e,n.contract.methods.addTokenTemplate,t)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.addTokenTemplate,t))})})}catch(e){return Promise.reject(e)}},r.disableTokenTemplate=function(e,t,r){try{var n=this;return Promise.resolve(n.getOwner()).then(function(o){if(o!==e)throw new Error("Caller is not Factory Owner");return Promise.resolve(n.getCurrentTokenTemplateCount()).then(function(o){if(t>o)throw new Error("Template index doesnt exist");if(0===t)throw new Error("Template index cannot be ZERO");return Promise.resolve(n.getTokenTemplate(t)).then(function(o){if(!1===o.isActive)throw new Error("Template is already disabled");return Promise.resolve(Z(e,n.contract.methods.disableTokenTemplate,t)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.disableTokenTemplate,t))})})})})}catch(e){return Promise.reject(e)}},r.reactivateTokenTemplate=function(e,t,r){try{var n=this;return Promise.resolve(n.getOwner()).then(function(o){if(o!==e)throw new Error("Caller is not Factory Owner");return Promise.resolve(n.getCurrentTokenTemplateCount()).then(function(o){if(t>o)throw new Error("Template index doesnt exist");if(0===t)throw new Error("Template index cannot be ZERO");return Promise.resolve(n.getTokenTemplate(t)).then(function(o){if(!0===o.isActive)throw new Error("Template is already active");return Promise.resolve(Z(e,n.contract.methods.reactivateTokenTemplate,t)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.reactivateTokenTemplate,t))})})})})}catch(e){return Promise.reject(e)}},r.startMultipleTokenOrder=function(e,t,r){try{var n=this;if(t.length>50)throw new Error("Too many orders");return Promise.resolve(Z(e,n.contract.methods.startMultipleTokenOrder,t)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+1,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.startMultipleTokenOrder,t))})}catch(e){return Promise.reject(e)}},r.createNftWithDatatoken=function(e,t,r,n){try{var o=this,i=o.getErcCreationParams(r);return Promise.resolve(Z(e,o.contract.methods.createNftWithErc20,t,i)).then(function(r){var a;return n?r:Promise.resolve(H(e,r+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,o.contract.methods.createNftWithErc20,t,i))})}catch(e){return Promise.reject(e)}},r.createNftWithDatatokenWithFixedRate=function(e,t,r,n,o){try{var i=this,a=i.getErcCreationParams(r),s=i.getFreCreationParams(n);return Promise.resolve(Z(e,i.contract.methods.createNftWithErc20WithFixedRate,t,a,s)).then(function(r){var n;return o?r:Promise.resolve(H(e,r+1,i.web3,null==(n=i.config)?void 0:n.gasFeeMultiplier,i.contract.methods.createNftWithErc20WithFixedRate,t,a,s))})}catch(e){return Promise.reject(e)}},r.createNftWithDatatokenWithDispenser=function(e,t,r,n,o){try{var i=this,a=i.getErcCreationParams(r);return n.maxBalance=y.default.utils.toWei(n.maxBalance),n.maxTokens=y.default.utils.toWei(n.maxTokens),Promise.resolve(Z(e,i.contract.methods.createNftWithErc20WithDispenser,t,a,n)).then(function(r){var s;return o?r:Promise.resolve(H(e,r+1,i.web3,null==(s=i.config)?void 0:s.gasFeeMultiplier,i.contract.methods.createNftWithErc20WithDispenser,t,a,n))})}catch(e){return Promise.reject(e)}},r.getErcCreationParams=function(e){var t,r;if(!e.name||!e.symbol){var n=te();t=n.name,r=n.symbol}return{templateIndex:e.templateIndex,strings:[e.name||t,e.symbol||r],addresses:[e.minter,e.paymentCollector,e.mpFeeAddress,e.feeToken],uints:[y.default.utils.toWei(e.cap),y.default.utils.toWei(e.feeAmount)],bytess:[]}},r.getFreCreationParams=function(e){e.allowedConsumer||(e.allowedConsumer=_);var t=e.withMint?1:0;return{fixedPriceAddress:e.fixedRateAddress,addresses:[e.baseTokenAddress,e.owner,e.marketFeeCollector,e.allowedConsumer],uints:[e.baseTokenDecimals,e.datatokenDecimals,y.default.utils.toWei(e.fixedRate),y.default.utils.toWei(e.marketFee),t]}},t}(fe),ye=/*#__PURE__*/function(e){function t(){return e.apply(this,arguments)||this}I(t,e);var r=t.prototype;return r.getDefaultAbi=function(){return j.default.abi},r.lockTokens=function(e,t,r,n){try{var o=this,i=o.amountToUnits;return Promise.resolve(o.getToken()).then(function(a){return Promise.resolve(i.call(o,a,t)).then(function(t){return Promise.resolve(Z(e,o.contract.methods.create_lock,t,r)).then(function(i){var a;return n?i:Promise.resolve(H(e,i+2e4,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,o.contract.methods.create_lock,t,r))})})})}catch(e){return Promise.reject(e)}},r.depositFor=function(e,t,r,n){try{var o=this,i=o.amountToUnits;return Promise.resolve(o.getToken()).then(function(a){return Promise.resolve(i.call(o,a,r)).then(function(r){return Promise.resolve(Z(e,o.contract.methods.deposit_for,t,r)).then(function(i){var a;return n?i:Promise.resolve(H(e,i+2e4,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,o.contract.methods.deposit_for,t,r))})})})}catch(e){return Promise.reject(e)}},r.increaseAmount=function(e,t,r){try{var n=this,o=n.amountToUnits;return Promise.resolve(n.getToken()).then(function(i){return Promise.resolve(o.call(n,i,t)).then(function(t){return Promise.resolve(Z(e,n.contract.methods.increase_amount,t)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+2e4,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.increase_amount,t))})})})}catch(e){return Promise.reject(e)}},r.increaseUnlockTime=function(e,t,r){try{var n=this;return Promise.resolve(Z(e,n.contract.methods.increase_unlock_time,t)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+2e4,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.increase_unlock_time,t))})}catch(e){return Promise.reject(e)}},r.withdraw=function(e,t){try{var r=this;return Promise.resolve(Z(e,r.contract.methods.withdraw)).then(function(n){var o;return t?n:Promise.resolve(H(e,n+1,r.web3,null==(o=r.config)?void 0:o.gasFeeMultiplier,r.contract.methods.withdraw))})}catch(e){return Promise.reject(e)}},r.getVotingPower=function(e){try{return Promise.resolve(this.contract.methods.balanceOf(e).call())}catch(e){return Promise.reject(e)}},r.getLockedAmount=function(e){try{var t=this;return Promise.resolve(t.contract.methods.locked(e).call()).then(function(e){var r=t.unitsToAmount;return Promise.resolve(t.getToken()).then(function(n){return Promise.resolve(r.call(t,n,e.amount))})})}catch(e){return Promise.reject(e)}},r.lockEnd=function(e){try{return Promise.resolve(this.contract.methods.locked__end(e).call())}catch(e){return Promise.reject(e)}},r.totalSupply=function(){try{var e=this,t=e.unitsToAmount;return Promise.resolve(e.getToken()).then(function(r){return Promise.resolve(e.contract.methods.totalSupply().call()).then(function(n){return Promise.resolve(t.call(e,r,n))})})}catch(e){return Promise.reject(e)}},r.getToken=function(){try{return Promise.resolve(this.contract.methods.token().call())}catch(e){return Promise.reject(e)}},t}(fe),Ce=/*#__PURE__*/function(e){function t(){return e.apply(this,arguments)||this}I(t,e);var r=t.prototype;return r.getDefaultAbi=function(){return R.default.abi},r.claim=function(e,t){try{var r=this;return Promise.resolve(Z(e,r.contract.methods.claim)).then(function(n){var o;return t?n:Promise.resolve(H(e,n+2e4,r.web3,null==(o=r.config)?void 0:o.gasFeeMultiplier,r.contract.methods.claim))})}catch(e){return Promise.reject(e)}},r.claimMany=function(e,t,r){try{var n=this;return Promise.resolve(Z(e,n.contract.methods.claim_many,t)).then(function(o){var i;return r?o:Promise.resolve(H(e,o+2e4,n.web3,null==(i=n.config)?void 0:i.gasFeeMultiplier,n.contract.methods.claim_many,t))})}catch(e){return Promise.reject(e)}},t}(fe),Fe=/*#__PURE__*/function(e){function t(){return e.apply(this,arguments)||this}I(t,e);var r=t.prototype;return r.getDefaultAbi=function(){return M.default.abi},r.estimateClaim=function(e){try{var t=this;return Promise.resolve(t.contract.methods.estimateClaim(e).call()).then(function(e){return Promise.resolve(t.contract.methods.voting_escrow().call()).then(function(r){var n=new ye(r,t.web3),o=t.unitsToAmount;return Promise.resolve(n.getToken()).then(function(r){return Promise.resolve(o.call(t,r,e))})})})}catch(e){return Promise.reject(e)}},t}(fe),we=/*#__PURE__*/function(e){function t(){return e.apply(this,arguments)||this}I(t,e);var r=t.prototype;return r.getDefaultAbi=function(){return O.default.abi},r.setAllocation=function(e,t,r,n,o){try{var i=this;return Promise.resolve(Z(e,i.contract.methods.setAllocation,t,r,n)).then(function(a){var s;return o?a:Promise.resolve(H(e,a+1,i.web3,null==(s=i.config)?void 0:s.gasFeeMultiplier,i.contract.methods.setAllocation,t,r,n))})}catch(e){return Promise.reject(e)}},r.setBatchAllocation=function(e,t,r,n,o){try{var i=this;return Promise.resolve(Z(e,i.contract.methods.setBatchAllocation,t,r,n)).then(function(a){var s;return o?a:Promise.resolve(H(e,a+1,i.web3,null==(s=i.config)?void 0:s.gasFeeMultiplier,i.contract.methods.setBatchAllocation,t,r,n))})}catch(e){return Promise.reject(e)}},r.getTotalAllocation=function(e){try{return Promise.resolve(this.contract.methods.getTotalAllocation(e).call())}catch(e){return Promise.reject(e)}},r.getVeAllocation=function(e,t,r){try{return Promise.resolve(this.contract.methods.getveAllocation(e,t,r).call())}catch(e){return Promise.reject(e)}},t}(fe);function De(e,t,r){if(!e.s){if(r instanceof Ae){if(!r.s)return void(r.o=De.bind(null,e,t));1&t&&(t=r.s),r=r.v}if(r&&r.then)return void r.then(De.bind(null,e,t),De.bind(null,e,2));e.s=t,e.v=r;const n=e.o;n&&n(e)}}var Ae=/*#__PURE__*/function(){function e(){}return e.prototype.then=function(t,r){var n=new e,o=this.s;if(o){var i=1&o?t:r;if(i){try{De(n,1,i(this.v))}catch(e){De(n,2,e)}return n}return this}return this.o=function(e){try{var o=e.v;1&e.s?De(n,1,t?t(o):o):r?De(n,1,r(o)):De(n,2,o)}catch(e){De(n,2,e)}},n},e}(),xe=/*#__PURE__*/function(e){function t(){return e.apply(this,arguments)||this}I(t,e);var r=t.prototype;return r.getDefaultAbi=function(){return S.default.abi},r.getAvailableRewards=function(e,t){try{var r=this;return Promise.resolve(r.contract.methods.claimable(e,t).call()).then(function(e){return Promise.resolve(r.unitsToAmount(t,e))})}catch(e){return Promise.reject(e)}},r.claimRewards=function(e,t,r,n){try{var o=this;return Promise.resolve(Z(e,o.contract.methods.claimFor,t,r)).then(function(i){var a;return n?i:Promise.resolve(H(e,i+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,o.contract.methods.claimFor,t,r))})}catch(e){return Promise.reject(e)}},r.allocateRewards=function(e,t,r,n,o){try{var i=function(){return Promise.resolve(Z(e,a.contract.methods.allocate,t,r,n)).then(function(i){var s;return o?i:Promise.resolve(H(e,i+1,a.web3,null==(s=a.config)?void 0:s.gasFeeMultiplier,a.contract.methods.allocate,t,r,n))})},a=this,s=(c=r,u=function(e){return Promise.resolve(a.amountToUnits(n,r[e])).then(function(t){r[e]=t})},m=-1,function e(t){try{for(;++m<c.length;)if((t=u(m))&&t.then){if(!((r=t)instanceof Ae&&1&r.s))return void t.then(e,d||(d=De.bind(null,l=new Ae,2)));t=t.v}l?De(l,1,t):l=t}catch(e){De(l||(l=new Ae),2,e)}var r}(),l);return Promise.resolve(s&&s.then?s.then(i):i())}catch(e){return Promise.reject(e)}var c,u,l,d,m},t}(fe);function Te(e,t,r){if(!e.s){if(r instanceof Be){if(!r.s)return void(r.o=Te.bind(null,e,t));1&t&&(t=r.s),r=r.v}if(r&&r.then)return void r.then(Te.bind(null,e,t),Te.bind(null,e,2));e.s=t,e.v=r;const n=e.o;n&&n(e)}}var Be=/*#__PURE__*/function(){function e(){}return e.prototype.then=function(t,r){var n=new e,o=this.s;if(o){var i=1&o?t:r;if(i){try{Te(n,1,i(this.v))}catch(e){Te(n,2,e)}return n}return this}return this.o=function(e){try{var o=e.v;1&e.s?Te(n,1,t?t(o):o):r?Te(n,1,r(o)):Te(n,2,o)}catch(e){Te(n,2,e)}},n},e}(),ke=/*#__PURE__*/function(e){function t(){return e.apply(this,arguments)||this}I(t,e);var r=t.prototype;return r.getDefaultAbi=function(){return U.default.abi},r.getMultipleAvailableRewards=function(e,t){try{var r=this;return Promise.resolve(r.contract.methods.claimables(e,t).call()).then(function(e){var n,o,i,a,s,c=[],u=(n=e,o=function(n){var o=c.push;return Promise.resolve(r.unitsToAmount(t[n],e[n])).then(function(e){o.call(c,e)})},s=-1,function e(t){try{for(;++s<n.length;)if((t=o(s))&&t.then){if(!((r=t)instanceof Be&&1&r.s))return void t.then(e,a||(a=Te.bind(null,i=new Be,2)));t=t.v}i?Te(i,1,t):i=t}catch(e){Te(i||(i=new Be),2,e)}var r}(),i);return u&&u.then?u.then(function(){return c}):c})}catch(e){return Promise.reject(e)}},r.claimMultipleRewards=function(e,t,r,n){try{var o=this;return Promise.resolve(Z(e,o.contract.methods.claimMultiple,t,r)).then(function(i){var a;return n?i:Promise.resolve(H(e,i+1,o.web3,null==(a=o.config)?void 0:a.gasFeeMultiplier,o.contract.methods.claimMultiple,t,r))})}catch(e){return Promise.reject(e)}},t}(fe);function je(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}function Re(e,t,r){if(!e.s){if(r instanceof Me){if(!r.s)return void(r.o=Re.bind(null,e,t));1&t&&(t=r.s),r=r.v}if(r&&r.then)return void r.then(Re.bind(null,e,t),Re.bind(null,e,2));e.s=t,e.v=r;var n=e.o;n&&n(e)}}var Me=/*#__PURE__*/function(){function e(){}return e.prototype.then=function(t,r){var n=new e,o=this.s;if(o){var i=1&o?t:r;if(i){try{Re(n,1,i(this.v))}catch(e){Re(n,2,e)}return n}return this}return this.o=function(e){try{var o=e.v;1&e.s?Re(n,1,t?t(o):o):r?Re(n,1,r(o)):Re(n,2,o)}catch(e){Re(n,2,e)}},n},e}();function Oe(e){return e instanceof Me&&1&e.s}var Se=/*#__PURE__*/function(){function e(e){this.aquariusURL=void 0,this.aquariusURL=e}var t=e.prototype;return t.resolve=function(e,t){try{var r=this.aquariusURL+"/api/aquarius/assets/ddo/"+e;return Promise.resolve(je(function(){return Promise.resolve(C.default(r,{method:"GET",headers:{"Content-Type":"application/json"},signal:t})).then(function(e){if(e.ok)return Promise.resolve(e.json());throw new Error("HTTP request failed with status "+e.status)})},function(e){throw ie.error(e),new Error("HTTP request failed")}))}catch(e){return Promise.reject(e)}},t.waitForAqua=function(e,t,r){try{var n,o=this,i=0,a=function(e,t){var r;do{var n=e();if(n&&n.then){if(!Oe(n)){r=!0;break}n=n.v}var o=t();if(Oe(o)&&(o=o.v),!o)return n}while(!o.then);var i=new Me,a=Re.bind(null,i,2);return(r?n.then(s):o.then(c)).then(void 0,a),i;function s(r){for(n=r;Oe(o=t())&&(o=o.v),o;){if(o.then)return void o.then(c).then(void 0,a);if((n=e())&&n.then){if(!Oe(n))return void n.then(s).then(void 0,a);n=n.v}}Re(i,1,n)}function c(r){if(r){do{if((n=e())&&n.then){if(!Oe(n))return void n.then(s).then(void 0,a);n=n.v}if(Oe(r=t())&&(r=r.v),!r)return void Re(i,1,n)}while(!r.then);r.then(c).then(void 0,a)}else Re(i,1,n)}}(function(){function a(e){return n?e:Promise.resolve(ne(1500)).then(function(){i++})}var s=je(function(){return Promise.resolve(C.default(o.aquariusURL+"/api/aquarius/assets/ddo/"+e,{method:"GET",headers:{"Content-Type":"application/json"},signal:r})).then(function(e){return function(){if(e.ok)return Promise.resolve(e.json()).then(function(e){return t?e.event&&e.event.txid===t?(n=1,e):void 0:(n=1,e)})}()})},function(){});return s&&s.then?s.then(a):a(s)},function(){return!n&&i<100});return Promise.resolve(a&&a.then?a.then(function(e){return n?e:null}):n?a:null)}catch(e){return Promise.reject(e)}},t.validate=function(e,t){try{var r,n=this,o={valid:!1},i=je(function(){return Promise.resolve(C.default(n.aquariusURL+"/api/aquarius/assets/ddo/validate",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/octet-stream"},signal:t})).then(function(e){return Promise.resolve(e.json()).then(function(t){r=t,200===e.status?(o.valid=!0,o.hash=r.hash,o.proof={validatorAddress:r.publicKey,r:r.r[0],s:r.s[0],v:r.v}):(o.errors=r,ie.error("validate Metadata failed:",e.status,o.errors))})})},function(e){ie.error("Error validating metadata: ",e)});return Promise.resolve(i&&i.then?i.then(function(){return o}):o)}catch(e){return Promise.reject(e)}},t.getAssetMetadata=function(e,t){try{var r=this.aquariusURL+"/api/aquarius/assets/metadata/"+e;return Promise.resolve(je(function(){return Promise.resolve(C.default(r,{method:"GET",headers:{"Content-Type":"application/json"},signal:t})).then(function(e){if(e.ok)return e.json();throw new Error("getAssetMetadata failed: "+e.status+e.statusText)})},function(e){throw ie.error("Error getting metadata: ",e),new Error("Error getting metadata: "+e)}))}catch(e){return Promise.reject(e)}},t.querySearch=function(e,t){try{var r=this.aquariusURL+"/api/aquarius/assets/query";return Promise.resolve(je(function(){return Promise.resolve(C.default(r,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"},signal:t})).then(function(e){if(e.ok)return e.json();throw new Error("querySearch failed: "+e.status+e.statusText)})},function(e){throw ie.error("Error querying metadata: ",e),new Error("Error querying metadata: "+e)}))}catch(e){return Promise.reject(e)}},e}();function Ue(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}var Ne=/*#__PURE__*/function(){function e(){}var t=e.prototype;return t.getEndpoints=function(e){try{var t=this;return Promise.resolve(Ue(function(){return Promise.resolve(t.getData(e)).then(function(e){return Promise.resolve(e.json())})},function(e){throw ie.error("Finding the service endpoints failed:",e),new Error("HTTP request failed calling Provider")}))}catch(e){return Promise.reject(e)}},t.getEndpointURL=function(e,t){return e?e.find(function(e){return e.serviceName===t}):null},t.getServiceEndpoints=function(e,t){try{var r=[];for(var n in t.serviceEndpoints)r.push({serviceName:n,method:t.serviceEndpoints[n][0],urlPath:e+t.serviceEndpoints[n][1]});return Promise.resolve(r)}catch(e){return Promise.reject(e)}},t.getNonce=function(e,t,r,n,o){try{var i=function(){function i(){var e=a.getEndpointURL(o,"nonce")?a.getEndpointURL(o,"nonce").urlPath:null;return e?Ue(function(){return Promise.resolve(C.default(e+"?userAddress="+t,{method:"GET",headers:{"Content-Type":"application/json"},signal:r})).then(function(e){return Promise.resolve(e.json()).then(function(e){return e.nonce.toString()})})},function(e){throw ie.error(e),new Error("HTTP request failed calling Provider")}):null}var s=function(){if(!o)return Promise.resolve(a.getServiceEndpoints(e,n)).then(function(e){o=e})}();return s&&s.then?s.then(i):i()},a=this,s=function(){if(!n)return Promise.resolve(a.getEndpoints(e)).then(function(e){n=e})}();return Promise.resolve(s&&s.then?s.then(i):i())}catch(e){return Promise.reject(e)}},t.signProviderRequest=function(e,t,r,n){try{var o=e.utils.soliditySha3({t:"bytes",v:e.utils.utf8ToHex(r)});return Promise.resolve(e&&e.currentProvider&&e.currentProvider.isMetaMask?e.eth.personal.sign(o,t,n):e.eth.sign(o,t))}catch(e){return Promise.reject(e)}},t.encrypt=function(e,t,r){try{var n=this;return Promise.resolve(n.getEndpoints(t)).then(function(o){return Promise.resolve(n.getServiceEndpoints(t,o)).then(function(t){var o=n.getEndpointURL(t,"encrypt")?n.getEndpointURL(t,"encrypt").urlPath:null;return o?Ue(function(){return Promise.resolve(C.default(o,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/octet-stream"},signal:r})).then(function(e){return Promise.resolve(e.text())})},function(e){throw ie.error(e),new Error("HTTP request failed calling Provider")}):null})})}catch(e){return Promise.reject(e)}},t.checkDidFiles=function(e,t,r,n,o){void 0===n&&(n=!1);try{var i=this;return Promise.resolve(i.getEndpoints(r)).then(function(a){return Promise.resolve(i.getServiceEndpoints(r,a)).then(function(r){var a={did:e,serviceId:t,checksum:n},s=[],c=i.getEndpointURL(r,"fileinfo")?i.getEndpointURL(r,"fileinfo").urlPath:null;return c?Ue(function(){return Promise.resolve(C.default(c,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"},signal:o})).then(function(e){return Promise.resolve(e.json()).then(function(e){for(var t,r=q(e);!(t=r()).done;)s.push(t.value);return s})})},function(e){throw ie.error(e),new Error("HTTP request failed calling Provider")}):null})})}catch(e){return Promise.reject(e)}},t.getFileInfo=function(e,t,r,n,o){void 0===r&&(r=!1);try{var i=this;return Promise.resolve(i.getEndpoints(t)).then(function(a){return Promise.resolve(i.getServiceEndpoints(t,a)).then(function(t){var a=N({},e,{headers:o,checksum:r}),s=[],c=i.getEndpointURL(t,"fileinfo")?i.getEndpointURL(t,"fileinfo").urlPath:null;return c?Ue(function(){return Promise.resolve(C.default(c,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"},signal:n})).then(function(e){return Promise.resolve(e.json()).then(function(e){for(var t,r=q(e);!(t=r()).done;)s.push(t.value);return s})})},function(e){throw ie.error(e),new Error("HTTP request failed calling Provider")}):null})})}catch(e){return Promise.reject(e)}},t.getComputeEnvironments=function(e,t){try{var r=this;return Promise.resolve(r.getEndpoints(e)).then(function(n){return Promise.resolve(r.getServiceEndpoints(e,n)).then(function(e){var n,o=null==(n=r.getEndpointURL(e,"computeEnvironments"))?void 0:n.urlPath;return o?Ue(function(){return Promise.resolve(C.default(o,{method:"GET",headers:{"Content-Type":"application/json"},signal:t})).then(function(e){return Promise.resolve(e.json())})},function(e){throw ie.error(e),new Error("HTTP request failed calling Provider")}):null})})}catch(e){return Promise.reject(e)}},t.initialize=function(e,t,r,n,o,i,a,s,c){try{var u=this;return Promise.resolve(u.getEndpoints(o)).then(function(l){return Promise.resolve(u.getServiceEndpoints(o,l)).then(function(o){var l=u.getEndpointURL(o,"initialize")?u.getEndpointURL(o,"initialize").urlPath:null;return l?(l+="?documentId="+e,l+="&serviceId="+t,l+="&fileIndex="+r,l+="&consumerAddress="+n,a&&(l+="&userdata="+encodeURI(JSON.stringify(a))),s&&(l+="&environment="+encodeURI(s)),c&&(l+="&validUntil="+c),Ue(function(){return Promise.resolve(C.default(l,{method:"GET",headers:{"Content-Type":"application/json"},signal:i})).then(function(e){return Promise.resolve(e.json())})},function(e){throw ie.error(e),new Error("Asset URL not found or not available.")})):null})})}catch(e){return Promise.reject(e)}},t.initializeCompute=function(e,t,r,n,o,i,a){try{var s=this;return Promise.resolve(s.getEndpoints(o)).then(function(c){return Promise.resolve(s.getServiceEndpoints(o,c)).then(function(o){var c={datasets:e,algorithm:t,compute:{env:r,validUntil:n},consumerAddress:i},u=s.getEndpointURL(o,"initializeCompute")?s.getEndpointURL(o,"initializeCompute").urlPath:null;return u?Ue(function(){return Promise.resolve(C.default(u,{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"},signal:a})).then(function(e){return Promise.resolve(e.json())})},function(e){throw ie.error(e),new Error("ComputeJob cannot be initialized")}):null})})}catch(e){return Promise.reject(e)}},t.getDownloadUrl=function(e,t,r,n,o,i,a,s){try{var c=this;return Promise.resolve(c.getEndpoints(i)).then(function(u){return Promise.resolve(c.getServiceEndpoints(i,u)).then(function(i){var u=c.getEndpointURL(i,"download")?c.getEndpointURL(i,"download").urlPath:null;if(!u)return null;var l=Date.now();return Promise.resolve(c.signProviderRequest(a,t,e+l)).then(function(i){var a=u;return a+="?fileIndex="+n,a+="&documentId="+e,a+="&transferTxId="+o,a+="&serviceId="+r,a+="&consumerAddress="+t,a+="&nonce="+l,a+="&signature="+i,s&&(a+="&userdata="+encodeURI(JSON.stringify(s))),a})})})}catch(e){return Promise.reject(e)}},t.computeStart=function(e,t,r,n,o,i,a,s,c){try{var u=this;return Promise.resolve(u.getEndpoints(e)).then(function(l){return Promise.resolve(u.getServiceEndpoints(e,l)).then(function(e){var l=u.getEndpointURL(e,"computeStart")?u.getEndpointURL(e,"computeStart").urlPath:null,d=Date.now(),m=r;return m+=o.documentId,m+=d,Promise.resolve(u.signProviderRequest(t,r,m)).then(function(e){var t=Object();return t.consumerAddress=r,t.signature=e,t.nonce=d,t.environment=n,t.dataset=o,t.algorithm=i,t.additionalDatasets&&(t.additionalDatasets=s),c&&(t.output=c),l?Ue(function(){return Promise.resolve(C.default(l,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"},signal:a})).then(function(e){var r;function n(n){if(r)return n;var o=ie.error,i=e.statusText,a=e.status;return Promise.resolve(e.json()).then(function(e){return o.call(ie,"Compute start failed: ",a,i,e),ie.error("Payload was:",t),null})}var o=function(){if(null!=e&&e.ok)return Promise.resolve(e.json()).then(function(e){return r=1,e})}();return o&&o.then?o.then(n):n(o)})},function(e){throw ie.error("Compute start failed:"),ie.error(e),ie.error("Payload was:",t),new Error("HTTP request failed calling Provider")}):null})})})}catch(e){return Promise.reject(e)}},t.computeStop=function(e,t,r,n,o,i){try{var a=this;return Promise.resolve(a.getEndpoints(n)).then(function(s){return Promise.resolve(a.getServiceEndpoints(n,s)).then(function(c){var u=a.getEndpointURL(c,"computeStop")?a.getEndpointURL(c,"computeStop").urlPath:null;return Promise.resolve(a.getNonce(n,t,i,s,c)).then(function(n){var s=t;return s+=r||"",s+=e&&""+a.noZeroX(e)||"",s+=n,Promise.resolve(a.signProviderRequest(o,t,s)).then(function(n){var o=Object();return o.signature=n,o.documentId=a.noZeroX(e),o.consumerAddress=t,r&&(o.jobId=r),u?Ue(function(){return Promise.resolve(C.default(u,{method:"PUT",body:JSON.stringify(o),headers:{"Content-Type":"application/json"},signal:i})).then(function(e){var t;function r(r){return t?r:(ie.error("Compute stop failed:",e.status,e.statusText),ie.error("Payload was:",o),null)}var n=function(){if(null!=e&&e.ok)return Promise.resolve(e.json()).then(function(e){return t=1,e})}();return n&&n.then?n.then(r):r(n)})},function(e){throw ie.error("Compute stop failed:"),ie.error(e),ie.error("Payload was:",o),new Error("HTTP request failed calling Provider")}):null})})})})}catch(e){return Promise.reject(e)}},t.computeStatus=function(e,t,r,n,o){try{var i=this;return Promise.resolve(i.getEndpoints(e)).then(function(a){return Promise.resolve(i.getServiceEndpoints(e,a)).then(function(e){var a=i.getEndpointURL(e,"computeStatus")?i.getEndpointURL(e,"computeStatus").urlPath:null,s="?consumerAddress="+t;return s+=n&&"&documentId="+i.noZeroX(n)||"",s+=r&&"&jobId="+r||"",a?Ue(function(){return Promise.resolve(C.default(a+s,{method:"GET",headers:{"Content-Type":"application/json"},signal:o})).then(function(e){var t;function r(r){return t?r:(ie.error("Get compute status failed:",e.status,e.statusText),null)}var n=function(){if(null!=e&&e.ok)return Promise.resolve(e.json()).then(function(e){return t=1,e})}();return n&&n.then?n.then(r):r(n)})},function(e){throw ie.error("Get compute status failed"),ie.error(e),new Error("HTTP request failed calling Provider")}):null})})}catch(e){return Promise.reject(e)}},t.getComputeResultUrl=function(e,t,r,n,o){try{var i=this;return Promise.resolve(i.getEndpoints(e)).then(function(a){return Promise.resolve(i.getServiceEndpoints(e,a)).then(function(e){var a=i.getEndpointURL(e,"computeResult")?i.getEndpointURL(e,"computeResult").urlPath:null,s=Date.now(),c=r;return c+=n,c+=o.toString(),c+=s,Promise.resolve(i.signProviderRequest(t,r,c)).then(function(e){if(!a)return null;var t=a;return t+="?consumerAddress="+r,t+="&jobId="+n,t+="&index="+o.toString(),(t+="&nonce="+s)+(e&&"&signature="+e||"")})})})}catch(e){return Promise.reject(e)}},t.computeDelete=function(e,t,r,n,o,i){try{var a=this;return Promise.resolve(a.getEndpoints(n)).then(function(s){return Promise.resolve(a.getServiceEndpoints(n,s)).then(function(c){var u=a.getEndpointURL(c,"computeDelete")?a.getEndpointURL(c,"computeDelete").urlPath:null;return Promise.resolve(a.getNonce(n,t,i,s,c)).then(function(n){var s=t;return s+=r||"",s+=e&&""+a.noZeroX(e)||"",s+=n,Promise.resolve(a.signProviderRequest(o,t,s)).then(function(n){var o=Object();return o.documentId=a.noZeroX(e),o.consumerAddress=t,o.jobId=r,n&&(o.signature=n),u?Ue(function(){return Promise.resolve(C.default(u,{method:"DELETE",body:JSON.stringify(o),headers:{"Content-Type":"application/json"},signal:i})).then(function(e){var t;function r(r){return t?r:(ie.error("Delete compute job failed:",e.status,e.statusText),ie.error("Payload was:",o),null)}var n=function(){if(null!=e&&e.ok)return Promise.resolve(e.json()).then(function(e){return t=1,e})}();return n&&n.then?n.then(r):r(n)})},function(e){throw ie.error("Delete compute job failed:"),ie.error(e),ie.error("Payload was:",o),new Error("HTTP request failed calling Provider")}):null})})})})}catch(e){return Promise.reject(e)}},t.isValidProvider=function(e,t){try{return Promise.resolve(Ue(function(){return Promise.resolve(C.default(e,{method:"GET",headers:{"Content-Type":"application/json"},signal:t})).then(function(e){var t,r=function(){if(null!=e&&e.ok)return Promise.resolve(e.json()).then(function(e){if(e&&e.providerAddress)return t=!0})}();return r&&r.then?r.then(function(e){return!!t&&e}):!!t&&r})},function(e){return ie.error("Error validating provider: "+e.message),!1}))}catch(e){return Promise.reject(e)}},t.noZeroX=function(e){return this.zeroXTransformer(e,!1)},t.zeroXTransformer=function(e,t){void 0===e&&(e="");var r=this.inputMatch(e,/^(?:0x)*([a-f0-9]+)$/i,"zeroXTransformer");return(t&&r.valid?"0x":"")+r.output},t.inputMatch=function(e,t,r){if("string"!=typeof e)throw ie.debug("Not input string:"),ie.debug(e),new Error("["+r+"] Expected string, input type: "+typeof e);var n=e.match(t);return n?{valid:!0,output:n[1]}:(ie.warn("["+r+"] Input transformation failed."),{valid:!1,output:e})},t.getData=function(e){try{return Promise.resolve(C.default(e,{method:"GET",headers:{"Content-type":"application/json"}}))}catch(e){return Promise.reject(e)}},e}(),Ie=new Ne;exports.Aquarius=Se,exports.Config=function(){this.nodeUri=void 0,this.providerAddress=void 0,this.metadataCacheUri=void 0,this.providerUri=void 0,this.web3Provider=void 0,this.oceanTokenAddress=void 0,this.nftFactoryAddress=void 0,this.datatokensABI=void 0,this.fixedRateExchangeAddress=void 0,this.fixedRateExchangeAddressABI=void 0,this.dispenserAddress=void 0,this.dispenserABI=void 0,this.opfCommunityFeeCollector=void 0,this.sideStakingAddress=void 0,this.startBlock=void 0,this.verbose=void 0,this.authMessage=void 0,this.authTokenExpiration=void 0,this.parityUri=void 0,this.threshold=void 0,this.chainId=void 0,this.network=void 0,this.subgraphUri=void 0,this.explorerUri=void 0,this.oceanTokenSymbol=void 0,this.transactionBlockTimeout=void 0,this.transactionConfirmationBlocks=void 0,this.transactionPollingTimeout=void 0,this.gasFeeMultiplier=void 0,this.veAllocate=void 0,this.veOCEAN=void 0,this.veDelegation=void 0,this.veFeeDistributor=void 0,this.veDelegationProxy=void 0,this.DFRewards=void 0,this.DFStrategyV1=void 0,this.veFeeEstimate=void 0},exports.ConfigHelper=me,exports.Datatoken=be,exports.DfRewards=xe,exports.DfStrategyV1=ke,exports.Dispenser=ve,exports.FEE_HISTORY_NOT_SUPPORTED=V,exports.FixedRateExchange=pe,exports.GASLIMIT_DEFAULT=1e6,exports.Logger=oe,exports.LoggerInstance=ie,exports.MAX_UINT_256="115792089237316195423570985008687907853269984665640564039457584007913129639934",exports.Nft=Pe,exports.NftFactory=Ee,exports.Provider=Ne,exports.ProviderInstance=Ie,exports.Router=ge,exports.SmartContract=he,exports.SmartContractWithAddress=fe,exports.VeAllocate=we,exports.VeFeeDistributor=Ce,exports.VeFeeEstimate=Fe,exports.VeOcean=ye,exports.ZERO_ADDRESS=_,exports.allowance=ce,exports.allowanceWei=se,exports.amountToUnits=z,exports.approve=function(e,t,r,n,o,i,a,s,c){void 0===a&&(a=!1);try{var u,l=function(a){return u?a:Promise.resolve(z(e,n,i,s)).then(function(n){return Promise.resolve(Z(r,d.methods.approve,o,n)).then(function(i){return c?i:Promise.resolve(H(r,i+1,e,null==t?void 0:t.gasFeeMultiplier,d.methods.approve,o,n))})})},d=new e.eth.Contract(ae,n),m=function(){if(!a)return Promise.resolve(ce(e,n,r,o)).then(function(e){if(new F.default(e).greaterThanOrEqualTo(new F.default(i))){var t=new F.default(e).toNumber();return u=1,t}})}();return Promise.resolve(m&&m.then?m.then(l):l(m))}catch(e){return Promise.reject(e)}},exports.approveWei=function(e,t,r,n,o,i,a,s){void 0===a&&(a=!1);try{var c,u=function(n){if(c)return n;var a=null;return Promise.resolve(Z(r,l.methods.approve,o,i)).then(function(n){if(s)return n;var c=function(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}(function(){return Promise.resolve(H(r,n+1,e,null==t?void 0:t.gasFeeMultiplier,l.methods.approve,o,i)).then(function(e){a=e})},function(e){ie.error("ERROR: Failed to approve spender to spend tokens : "+e.message)});return c&&c.then?c.then(function(){return a}):a})},l=new e.eth.Contract(ae,n),d=function(){if(!a)return Promise.resolve(se(e,n,r,o)).then(function(e){if(new b.default(e).gt(new b.default(i))){var t=new F.default(e).toNumber();return c=1,t}})}();return Promise.resolve(d&&d.then?d.then(u):u(d))}catch(e){return Promise.reject(e)}},exports.balance=function(e,t,r,n){try{var o=new e.eth.Contract(ae,t);return Promise.resolve(o.methods.balanceOf(r).call()).then(function(r){return Promise.resolve(J(e,t,r,n))})}catch(e){return Promise.reject(e)}},exports.calculateEstimatedGas=Z,exports.configHelperNetworks=de,exports.decimals=function(e,t){try{var r=new e.eth.Contract(ae,t);return Promise.resolve(r.methods.decimals().call())}catch(e){return Promise.reject(e)}},exports.downloadFile=function(e,t){try{return Promise.resolve(C.default(e)).then(function(r){if(!r.ok)throw new Error("Response error.");var n;try{n=r.headers.get("content-disposition").match(/attachment;filename=(.+)/)[1]}catch(r){try{n=e.split("/").pop()}catch(e){n="file"+t}}return Promise.resolve(r.arrayBuffer()).then(function(e){return{data:e,filename:n}})})}catch(e){return Promise.reject(e)}},exports.downloadFileBrowser=function(e){try{return Promise.resolve(C.default(e,{method:"HEAD"})).then(function(t){var r=t.headers.get("content-disposition"),n=null!=r&&r.split("=")[1]?null==r?void 0:r.split("=")[1]:"file",o=new XMLHttpRequest;o.responseType="blob",o.open("GET",e),o.onload=function(){var e=window.URL.createObjectURL(o.response),t=document.createElement("a");t.href=e,t.setAttribute("download",n),document.body.appendChild(t),t.click(),t.remove(),window.URL.revokeObjectURL(e)},o.send(null)})}catch(e){return Promise.reject(e)}},exports.generateDid=function(e,t){return e=y.default.utils.toChecksumAddress(e),"did:op:"+E.default(e+t.toString(10)).toString()},exports.generateDtName=te,exports.getFairGasPrice=X,exports.getHash=function(e){return E.default(e).toString()},exports.minAbi=ae,exports.sendTx=H,exports.setContractDefaults=Y,exports.signHash=function(e,t,r){try{return Promise.resolve(e.eth.sign(t,r)).then(function(e){var t="0x"+(e=e.substr(2)).slice(0,64),r="0x"+e.slice(64,128),n="0x"+e.slice(128,130);return"0x00"===n&&(n="0x1b"),"0x01"===n&&(n="0x1c"),{v:n,r:t,s:r}})}catch(e){return Promise.reject(e)}},exports.sleep=ne,exports.transfer=function(e,t,r,n,o,i,a){try{var s=new e.eth.Contract(ae,n);return Promise.resolve(z(e,n,i)).then(function(n){return Promise.resolve(Z(r,s.methods.transfer,o,n)).then(function(i){return a?i:Promise.resolve(H(r,i+1,e,null==t?void 0:t.gasFeeMultiplier,s.methods.transfer,o,n))})})}catch(e){return Promise.reject(e)}},exports.unitsToAmount=J;
//# sourceMappingURL=lib.js.map
